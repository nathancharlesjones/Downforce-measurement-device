ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"main.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.MX_GPIO_Init,"ax",%progbits
  16              		.align	1
  17              		.arch armv7-m
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	MX_GPIO_Init:
  24              	.LFB74:
  25              		.file 1 "Src/main.c"
   1:Src/main.c    **** /* USER CODE BEGIN Header */
   2:Src/main.c    **** /**
   3:Src/main.c    ****   ******************************************************************************
   4:Src/main.c    ****   * @file           : main.c
   5:Src/main.c    ****   * @brief          : Main program body
   6:Src/main.c    ****   ******************************************************************************
   7:Src/main.c    ****   * @attention
   8:Src/main.c    ****   *
   9:Src/main.c    ****   * <h2><center>&copy; Copyright (c) 2020 STMicroelectronics.
  10:Src/main.c    ****   * All rights reserved.</center></h2>
  11:Src/main.c    ****   *
  12:Src/main.c    ****   * This software component is licensed by ST under BSD 3-Clause license,
  13:Src/main.c    ****   * the "License"; You may not use this file except in compliance with the
  14:Src/main.c    ****   * License. You may obtain a copy of the License at:
  15:Src/main.c    ****   *                        opensource.org/licenses/BSD-3-Clause
  16:Src/main.c    ****   *
  17:Src/main.c    ****   ******************************************************************************
  18:Src/main.c    ****   */
  19:Src/main.c    **** /* USER CODE END Header */
  20:Src/main.c    **** 
  21:Src/main.c    **** /* Includes ------------------------------------------------------------------*/
  22:Src/main.c    **** #include "main.h"
  23:Src/main.c    **** 
  24:Src/main.c    **** /* Private includes ----------------------------------------------------------*/
  25:Src/main.c    **** /* USER CODE BEGIN Includes */
  26:Src/main.c    **** #include <string.h>
  27:Src/main.c    **** #include <stdio.h>
  28:Src/main.c    **** #include <math.h>
  29:Src/main.c    **** /* USER CODE END Includes */
  30:Src/main.c    **** 
  31:Src/main.c    **** /* Private typedef -----------------------------------------------------------*/
  32:Src/main.c    **** /* USER CODE BEGIN PTD */
  33:Src/main.c    **** 
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 2


  34:Src/main.c    **** /* USER CODE END PTD */
  35:Src/main.c    **** 
  36:Src/main.c    **** /* Private define ------------------------------------------------------------*/
  37:Src/main.c    **** /* USER CODE BEGIN PD */
  38:Src/main.c    **** #define MAX_LOG_MSG_SIZE 128
  39:Src/main.c    **** /* USER CODE END PD */
  40:Src/main.c    **** 
  41:Src/main.c    **** /* Private macro -------------------------------------------------------------*/
  42:Src/main.c    **** /* USER CODE BEGIN PM */
  43:Src/main.c    **** 
  44:Src/main.c    **** /* USER CODE END PM */
  45:Src/main.c    **** 
  46:Src/main.c    **** /* Private variables ---------------------------------------------------------*/
  47:Src/main.c    **** ADC_HandleTypeDef hadc1;
  48:Src/main.c    **** 
  49:Src/main.c    **** SPI_HandleTypeDef hspi1;
  50:Src/main.c    **** 
  51:Src/main.c    **** UART_HandleTypeDef huart1;
  52:Src/main.c    **** UART_HandleTypeDef huart2;
  53:Src/main.c    **** 
  54:Src/main.c    **** /* USER CODE BEGIN PV */
  55:Src/main.c    **** static uint8_t SPI_msg[MAX_LOG_MSG_SIZE] = {0};
  56:Src/main.c    **** /* USER CODE END PV */
  57:Src/main.c    **** 
  58:Src/main.c    **** /* Private function prototypes -----------------------------------------------*/
  59:Src/main.c    **** void SystemClock_Config(void);
  60:Src/main.c    **** static void MX_GPIO_Init(void);
  61:Src/main.c    **** static void MX_ADC1_Init(void);
  62:Src/main.c    **** static void MX_SPI1_Init(void);
  63:Src/main.c    **** static void MX_USART1_UART_Init(void);
  64:Src/main.c    **** static void MX_USART2_UART_Init(void);
  65:Src/main.c    **** /* USER CODE BEGIN PFP */
  66:Src/main.c    **** void setGain(gain_t new_gain);
  67:Src/main.c    **** void setVref(uint16_t _new_Vref);
  68:Src/main.c    **** /* USER CODE END PFP */
  69:Src/main.c    **** 
  70:Src/main.c    **** /* Private user code ---------------------------------------------------------*/
  71:Src/main.c    **** /* USER CODE BEGIN 0 */
  72:Src/main.c    **** 
  73:Src/main.c    **** /* USER CODE END 0 */
  74:Src/main.c    **** 
  75:Src/main.c    **** /**
  76:Src/main.c    ****   * @brief  The application entry point.
  77:Src/main.c    ****   * @retval int
  78:Src/main.c    ****   */
  79:Src/main.c    **** int main(void)
  80:Src/main.c    **** {
  81:Src/main.c    ****   /* USER CODE BEGIN 1 */
  82:Src/main.c    ****   static char ADC_msg[MAX_LOG_MSG_SIZE] = {0};
  83:Src/main.c    ****   static const char channel_name[] = "LightSensor";
  84:Src/main.c    ****   static volatile uint16_t lightVal = 0;
  85:Src/main.c    ****   static volatile uint8_t zoomAndEnhance = 0;
  86:Src/main.c    ****   static const uint8_t gain[8] = {1,2,4,5,8,10,16,32};
  87:Src/main.c    ****   static volatile gain_t gain_idx = GAIN_OF_1;
  88:Src/main.c    ****   static volatile float Vin_min = 0;
  89:Src/main.c    ****   static volatile float Vin_max = 3.300;
  90:Src/main.c    ****   static volatile uint16_t Vref = 0;
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 3


  91:Src/main.c    ****   /* USER CODE END 1 */
  92:Src/main.c    ****   
  93:Src/main.c    **** 
  94:Src/main.c    ****   /* MCU Configuration--------------------------------------------------------*/
  95:Src/main.c    **** 
  96:Src/main.c    ****   /* Reset of all peripherals, Initializes the Flash interface and the Systick. */
  97:Src/main.c    ****   HAL_Init();
  98:Src/main.c    **** 
  99:Src/main.c    ****   /* USER CODE BEGIN Init */
 100:Src/main.c    **** 
 101:Src/main.c    ****   /* USER CODE END Init */
 102:Src/main.c    **** 
 103:Src/main.c    ****   /* Configure the system clock */
 104:Src/main.c    ****   SystemClock_Config();
 105:Src/main.c    **** 
 106:Src/main.c    ****   /* USER CODE BEGIN SysInit */
 107:Src/main.c    **** 
 108:Src/main.c    ****   /* USER CODE END SysInit */
 109:Src/main.c    **** 
 110:Src/main.c    ****   /* Initialize all configured peripherals */
 111:Src/main.c    ****   MX_GPIO_Init();
 112:Src/main.c    ****   MX_ADC1_Init();
 113:Src/main.c    ****   MX_SPI1_Init();
 114:Src/main.c    ****   MX_USART1_UART_Init();
 115:Src/main.c    ****   MX_USART2_UART_Init();
 116:Src/main.c    ****   /* USER CODE BEGIN 2 */
 117:Src/main.c    ****   if (HAL_ADCEx_Calibration_Start(&hadc1) != HAL_OK)
 118:Src/main.c    ****   {
 119:Src/main.c    ****       Error_Handler();
 120:Src/main.c    ****   }
 121:Src/main.c    ****   /* USER CODE END 2 */
 122:Src/main.c    ****  
 123:Src/main.c    ****  
 124:Src/main.c    **** 
 125:Src/main.c    ****   /* Infinite loop */
 126:Src/main.c    ****   /* USER CODE BEGIN WHILE */
 127:Src/main.c    ****   while (1)
 128:Src/main.c    ****   {
 129:Src/main.c    ****     /* USER CODE END WHILE */
 130:Src/main.c    **** 
 131:Src/main.c    ****     /* USER CODE BEGIN 3 */
 132:Src/main.c    ****     if (zoomAndEnhance)
 133:Src/main.c    ****     {
 134:Src/main.c    ****     	//calculate gain from Vin_max, Vin_min
 135:Src/main.c    ****     	float gain_float = 3.3 / ( Vin_max - Vin_min );
 136:Src/main.c    ****     	for ( gain_idx = GAIN_OF_32; gain_idx > 0; gain_idx--)
 137:Src/main.c    ****     	{
 138:Src/main.c    ****     		if ( gain[gain_idx] < gain_float ) break;
 139:Src/main.c    ****     	}
 140:Src/main.c    ****     	//update gain
 141:Src/main.c    ****     	setGain(gain_idx);
 142:Src/main.c    **** 
 143:Src/main.c    ****     	//calculate Vref from gain, Vin_min
 144:Src/main.c    ****     	float Vref_float = ( gain[gain_idx] * Vin_min ) / ( gain[gain_idx] - 1 );
 145:Src/main.c    ****     	uint16_t Vref = round( Vref_float * 4095 / 3.3f );
 146:Src/main.c    ****     	//update Vref
 147:Src/main.c    ****     	setVref(Vref);    	
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 4


 148:Src/main.c    ****     }
 149:Src/main.c    **** 
 150:Src/main.c    ****     HAL_ADC_Start(&hadc1);
 151:Src/main.c    ****     while( HAL_ADC_PollForConversion(&hadc1, HAL_MAX_DELAY) != HAL_OK );
 152:Src/main.c    ****     lightVal = HAL_ADC_GetValue(&hadc1);
 153:Src/main.c    ****     
 154:Src/main.c    ****     sprintf(&ADC_msg[0], "{ \"channel\" : \"%s\", \"time\" : %d, \"value\" : %d }\n\r", channel_nam
 155:Src/main.c    ****     HAL_UART_Transmit(&huart1, (uint8_t*)&ADC_msg[0], strlen(ADC_msg), HAL_MAX_DELAY);
 156:Src/main.c    **** 
 157:Src/main.c    ****     memset(&ADC_msg[0], 0, MAX_LOG_MSG_SIZE);
 158:Src/main.c    **** 
 159:Src/main.c    ****     HAL_Delay(5);
 160:Src/main.c    ****   }
 161:Src/main.c    ****   /* USER CODE END 3 */
 162:Src/main.c    **** }
 163:Src/main.c    **** 
 164:Src/main.c    **** /**
 165:Src/main.c    ****   * @brief System Clock Configuration
 166:Src/main.c    ****   * @retval None
 167:Src/main.c    ****   */
 168:Src/main.c    **** void SystemClock_Config(void)
 169:Src/main.c    **** {
 170:Src/main.c    ****   RCC_OscInitTypeDef RCC_OscInitStruct = {0};
 171:Src/main.c    ****   RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};
 172:Src/main.c    ****   RCC_PeriphCLKInitTypeDef PeriphClkInit = {0};
 173:Src/main.c    **** 
 174:Src/main.c    ****   /** Initializes the CPU, AHB and APB busses clocks 
 175:Src/main.c    ****   */
 176:Src/main.c    ****   RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;
 177:Src/main.c    ****   RCC_OscInitStruct.HSEState = RCC_HSE_ON;
 178:Src/main.c    ****   RCC_OscInitStruct.HSEPredivValue = RCC_HSE_PREDIV_DIV1;
 179:Src/main.c    ****   RCC_OscInitStruct.HSIState = RCC_HSI_ON;
 180:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
 181:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;
 182:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLMUL = RCC_PLL_MUL9;
 183:Src/main.c    ****   if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
 184:Src/main.c    ****   {
 185:Src/main.c    ****     Error_Handler();
 186:Src/main.c    ****   }
 187:Src/main.c    ****   /** Initializes the CPU, AHB and APB busses clocks 
 188:Src/main.c    ****   */
 189:Src/main.c    ****   RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK
 190:Src/main.c    ****                               |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
 191:Src/main.c    ****   RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;
 192:Src/main.c    ****   RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
 193:Src/main.c    ****   RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV2;
 194:Src/main.c    ****   RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;
 195:Src/main.c    **** 
 196:Src/main.c    ****   if (HAL_RCC_ClockConfig(&RCC_ClkInitStruct, FLASH_LATENCY_2) != HAL_OK)
 197:Src/main.c    ****   {
 198:Src/main.c    ****     Error_Handler();
 199:Src/main.c    ****   }
 200:Src/main.c    ****   PeriphClkInit.PeriphClockSelection = RCC_PERIPHCLK_ADC;
 201:Src/main.c    ****   PeriphClkInit.AdcClockSelection = RCC_ADCPCLK2_DIV6;
 202:Src/main.c    ****   if (HAL_RCCEx_PeriphCLKConfig(&PeriphClkInit) != HAL_OK)
 203:Src/main.c    ****   {
 204:Src/main.c    ****     Error_Handler();
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 5


 205:Src/main.c    ****   }
 206:Src/main.c    **** }
 207:Src/main.c    **** 
 208:Src/main.c    **** /**
 209:Src/main.c    ****   * @brief ADC1 Initialization Function
 210:Src/main.c    ****   * @param None
 211:Src/main.c    ****   * @retval None
 212:Src/main.c    ****   */
 213:Src/main.c    **** static void MX_ADC1_Init(void)
 214:Src/main.c    **** {
 215:Src/main.c    **** 
 216:Src/main.c    ****   /* USER CODE BEGIN ADC1_Init 0 */
 217:Src/main.c    **** 
 218:Src/main.c    ****   /* USER CODE END ADC1_Init 0 */
 219:Src/main.c    **** 
 220:Src/main.c    ****   ADC_ChannelConfTypeDef sConfig = {0};
 221:Src/main.c    **** 
 222:Src/main.c    ****   /* USER CODE BEGIN ADC1_Init 1 */
 223:Src/main.c    **** 
 224:Src/main.c    ****   /* USER CODE END ADC1_Init 1 */
 225:Src/main.c    ****   /** Common config 
 226:Src/main.c    ****   */
 227:Src/main.c    ****   hadc1.Instance = ADC1;
 228:Src/main.c    ****   hadc1.Init.ScanConvMode = ADC_SCAN_DISABLE;
 229:Src/main.c    ****   hadc1.Init.ContinuousConvMode = DISABLE;
 230:Src/main.c    ****   hadc1.Init.DiscontinuousConvMode = DISABLE;
 231:Src/main.c    ****   hadc1.Init.ExternalTrigConv = ADC_SOFTWARE_START;
 232:Src/main.c    ****   hadc1.Init.DataAlign = ADC_DATAALIGN_RIGHT;
 233:Src/main.c    ****   hadc1.Init.NbrOfConversion = 1;
 234:Src/main.c    ****   if (HAL_ADC_Init(&hadc1) != HAL_OK)
 235:Src/main.c    ****   {
 236:Src/main.c    ****     Error_Handler();
 237:Src/main.c    ****   }
 238:Src/main.c    ****   /** Configure Regular Channel 
 239:Src/main.c    ****   */
 240:Src/main.c    ****   sConfig.Channel = ADC_CHANNEL_0;
 241:Src/main.c    ****   sConfig.Rank = ADC_REGULAR_RANK_1;
 242:Src/main.c    ****   sConfig.SamplingTime = ADC_SAMPLETIME_1CYCLE_5;
 243:Src/main.c    ****   if (HAL_ADC_ConfigChannel(&hadc1, &sConfig) != HAL_OK)
 244:Src/main.c    ****   {
 245:Src/main.c    ****     Error_Handler();
 246:Src/main.c    ****   }
 247:Src/main.c    ****   /* USER CODE BEGIN ADC1_Init 2 */
 248:Src/main.c    **** 
 249:Src/main.c    ****   /* USER CODE END ADC1_Init 2 */
 250:Src/main.c    **** 
 251:Src/main.c    **** }
 252:Src/main.c    **** 
 253:Src/main.c    **** /**
 254:Src/main.c    ****   * @brief SPI1 Initialization Function
 255:Src/main.c    ****   * @param None
 256:Src/main.c    ****   * @retval None
 257:Src/main.c    ****   */
 258:Src/main.c    **** static void MX_SPI1_Init(void)
 259:Src/main.c    **** {
 260:Src/main.c    **** 
 261:Src/main.c    ****   /* USER CODE BEGIN SPI1_Init 0 */
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 6


 262:Src/main.c    **** 
 263:Src/main.c    ****   /* USER CODE END SPI1_Init 0 */
 264:Src/main.c    **** 
 265:Src/main.c    ****   /* USER CODE BEGIN SPI1_Init 1 */
 266:Src/main.c    **** 
 267:Src/main.c    ****   /* USER CODE END SPI1_Init 1 */
 268:Src/main.c    ****   /* SPI1 parameter configuration*/
 269:Src/main.c    ****   hspi1.Instance = SPI1;
 270:Src/main.c    ****   hspi1.Init.Mode = SPI_MODE_MASTER;
 271:Src/main.c    ****   hspi1.Init.Direction = SPI_DIRECTION_1LINE;
 272:Src/main.c    ****   hspi1.Init.DataSize = SPI_DATASIZE_8BIT;
 273:Src/main.c    ****   hspi1.Init.CLKPolarity = SPI_POLARITY_HIGH;
 274:Src/main.c    ****   hspi1.Init.CLKPhase = SPI_PHASE_2EDGE;
 275:Src/main.c    ****   hspi1.Init.NSS = SPI_NSS_SOFT;
 276:Src/main.c    ****   hspi1.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_4;
 277:Src/main.c    ****   hspi1.Init.FirstBit = SPI_FIRSTBIT_MSB;
 278:Src/main.c    ****   hspi1.Init.TIMode = SPI_TIMODE_DISABLE;
 279:Src/main.c    ****   hspi1.Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
 280:Src/main.c    ****   hspi1.Init.CRCPolynomial = 10;
 281:Src/main.c    ****   if (HAL_SPI_Init(&hspi1) != HAL_OK)
 282:Src/main.c    ****   {
 283:Src/main.c    ****     Error_Handler();
 284:Src/main.c    ****   }
 285:Src/main.c    ****   /* USER CODE BEGIN SPI1_Init 2 */
 286:Src/main.c    **** 
 287:Src/main.c    ****   /* USER CODE END SPI1_Init 2 */
 288:Src/main.c    **** 
 289:Src/main.c    **** }
 290:Src/main.c    **** 
 291:Src/main.c    **** /**
 292:Src/main.c    ****   * @brief USART1 Initialization Function
 293:Src/main.c    ****   * @param None
 294:Src/main.c    ****   * @retval None
 295:Src/main.c    ****   */
 296:Src/main.c    **** static void MX_USART1_UART_Init(void)
 297:Src/main.c    **** {
 298:Src/main.c    **** 
 299:Src/main.c    ****   /* USER CODE BEGIN USART1_Init 0 */
 300:Src/main.c    **** 
 301:Src/main.c    ****   /* USER CODE END USART1_Init 0 */
 302:Src/main.c    **** 
 303:Src/main.c    ****   /* USER CODE BEGIN USART1_Init 1 */
 304:Src/main.c    **** 
 305:Src/main.c    ****   /* USER CODE END USART1_Init 1 */
 306:Src/main.c    ****   huart1.Instance = USART1;
 307:Src/main.c    ****   huart1.Init.BaudRate = 460800;
 308:Src/main.c    ****   huart1.Init.WordLength = UART_WORDLENGTH_8B;
 309:Src/main.c    ****   huart1.Init.StopBits = UART_STOPBITS_1;
 310:Src/main.c    ****   huart1.Init.Parity = UART_PARITY_NONE;
 311:Src/main.c    ****   huart1.Init.Mode = UART_MODE_TX_RX;
 312:Src/main.c    ****   huart1.Init.HwFlowCtl = UART_HWCONTROL_NONE;
 313:Src/main.c    ****   huart1.Init.OverSampling = UART_OVERSAMPLING_16;
 314:Src/main.c    ****   if (HAL_UART_Init(&huart1) != HAL_OK)
 315:Src/main.c    ****   {
 316:Src/main.c    ****     Error_Handler();
 317:Src/main.c    ****   }
 318:Src/main.c    ****   /* USER CODE BEGIN USART1_Init 2 */
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 7


 319:Src/main.c    **** 
 320:Src/main.c    ****   /* USER CODE END USART1_Init 2 */
 321:Src/main.c    **** 
 322:Src/main.c    **** }
 323:Src/main.c    **** 
 324:Src/main.c    **** /**
 325:Src/main.c    ****   * @brief USART2 Initialization Function
 326:Src/main.c    ****   * @param None
 327:Src/main.c    ****   * @retval None
 328:Src/main.c    ****   */
 329:Src/main.c    **** static void MX_USART2_UART_Init(void)
 330:Src/main.c    **** {
 331:Src/main.c    **** 
 332:Src/main.c    ****   /* USER CODE BEGIN USART2_Init 0 */
 333:Src/main.c    **** 
 334:Src/main.c    ****   /* USER CODE END USART2_Init 0 */
 335:Src/main.c    **** 
 336:Src/main.c    ****   /* USER CODE BEGIN USART2_Init 1 */
 337:Src/main.c    **** 
 338:Src/main.c    ****   /* USER CODE END USART2_Init 1 */
 339:Src/main.c    ****   huart2.Instance = USART2;
 340:Src/main.c    ****   huart2.Init.BaudRate = 4800;
 341:Src/main.c    ****   huart2.Init.WordLength = UART_WORDLENGTH_8B;
 342:Src/main.c    ****   huart2.Init.StopBits = UART_STOPBITS_1;
 343:Src/main.c    ****   huart2.Init.Parity = UART_PARITY_NONE;
 344:Src/main.c    ****   huart2.Init.Mode = UART_MODE_TX_RX;
 345:Src/main.c    ****   huart2.Init.HwFlowCtl = UART_HWCONTROL_NONE;
 346:Src/main.c    ****   huart2.Init.OverSampling = UART_OVERSAMPLING_16;
 347:Src/main.c    ****   if (HAL_UART_Init(&huart2) != HAL_OK)
 348:Src/main.c    ****   {
 349:Src/main.c    ****     Error_Handler();
 350:Src/main.c    ****   }
 351:Src/main.c    ****   /* USER CODE BEGIN USART2_Init 2 */
 352:Src/main.c    **** 
 353:Src/main.c    ****   /* USER CODE END USART2_Init 2 */
 354:Src/main.c    **** 
 355:Src/main.c    **** }
 356:Src/main.c    **** 
 357:Src/main.c    **** /**
 358:Src/main.c    ****   * @brief GPIO Initialization Function
 359:Src/main.c    ****   * @param None
 360:Src/main.c    ****   * @retval None
 361:Src/main.c    ****   */
 362:Src/main.c    **** static void MX_GPIO_Init(void)
 363:Src/main.c    **** {
  26              		.loc 1 363 1 view -0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 32
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30 0000 30B5     		push	{r4, r5, lr}
  31              	.LCFI0:
  32              		.cfi_def_cfa_offset 12
  33              		.cfi_offset 4, -12
  34              		.cfi_offset 5, -8
  35              		.cfi_offset 14, -4
  36 0002 89B0     		sub	sp, sp, #36
  37              	.LCFI1:
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 8


  38              		.cfi_def_cfa_offset 48
 364:Src/main.c    ****   GPIO_InitTypeDef GPIO_InitStruct = {0};
  39              		.loc 1 364 3 view .LVU1
  40              		.loc 1 364 20 is_stmt 0 view .LVU2
  41 0004 0024     		movs	r4, #0
  42 0006 0494     		str	r4, [sp, #16]
  43 0008 0594     		str	r4, [sp, #20]
  44 000a 0694     		str	r4, [sp, #24]
  45 000c 0794     		str	r4, [sp, #28]
 365:Src/main.c    **** 
 366:Src/main.c    ****   /* GPIO Ports Clock Enable */
 367:Src/main.c    ****   __HAL_RCC_GPIOC_CLK_ENABLE();
  46              		.loc 1 367 3 is_stmt 1 view .LVU3
  47              	.LBB2:
  48              		.loc 1 367 3 view .LVU4
  49              		.loc 1 367 3 view .LVU5
  50 000e 1C4B     		ldr	r3, .L3
  51 0010 9A69     		ldr	r2, [r3, #24]
  52 0012 42F01002 		orr	r2, r2, #16
  53 0016 9A61     		str	r2, [r3, #24]
  54              		.loc 1 367 3 view .LVU6
  55 0018 9A69     		ldr	r2, [r3, #24]
  56 001a 02F01002 		and	r2, r2, #16
  57 001e 0092     		str	r2, [sp]
  58              		.loc 1 367 3 view .LVU7
  59 0020 009A     		ldr	r2, [sp]
  60              	.LBE2:
 368:Src/main.c    ****   __HAL_RCC_GPIOD_CLK_ENABLE();
  61              		.loc 1 368 3 view .LVU8
  62              	.LBB3:
  63              		.loc 1 368 3 view .LVU9
  64              		.loc 1 368 3 view .LVU10
  65 0022 9A69     		ldr	r2, [r3, #24]
  66 0024 42F02002 		orr	r2, r2, #32
  67 0028 9A61     		str	r2, [r3, #24]
  68              		.loc 1 368 3 view .LVU11
  69 002a 9A69     		ldr	r2, [r3, #24]
  70 002c 02F02002 		and	r2, r2, #32
  71 0030 0192     		str	r2, [sp, #4]
  72              		.loc 1 368 3 view .LVU12
  73 0032 019A     		ldr	r2, [sp, #4]
  74              	.LBE3:
 369:Src/main.c    ****   __HAL_RCC_GPIOA_CLK_ENABLE();
  75              		.loc 1 369 3 view .LVU13
  76              	.LBB4:
  77              		.loc 1 369 3 view .LVU14
  78              		.loc 1 369 3 view .LVU15
  79 0034 9A69     		ldr	r2, [r3, #24]
  80 0036 42F00402 		orr	r2, r2, #4
  81 003a 9A61     		str	r2, [r3, #24]
  82              		.loc 1 369 3 view .LVU16
  83 003c 9A69     		ldr	r2, [r3, #24]
  84 003e 02F00402 		and	r2, r2, #4
  85 0042 0292     		str	r2, [sp, #8]
  86              		.loc 1 369 3 view .LVU17
  87 0044 029A     		ldr	r2, [sp, #8]
  88              	.LBE4:
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 9


 370:Src/main.c    ****   __HAL_RCC_GPIOB_CLK_ENABLE();
  89              		.loc 1 370 3 view .LVU18
  90              	.LBB5:
  91              		.loc 1 370 3 view .LVU19
  92              		.loc 1 370 3 view .LVU20
  93 0046 9A69     		ldr	r2, [r3, #24]
  94 0048 42F00802 		orr	r2, r2, #8
  95 004c 9A61     		str	r2, [r3, #24]
  96              		.loc 1 370 3 view .LVU21
  97 004e 9B69     		ldr	r3, [r3, #24]
  98 0050 03F00803 		and	r3, r3, #8
  99 0054 0393     		str	r3, [sp, #12]
 100              		.loc 1 370 3 view .LVU22
 101 0056 039B     		ldr	r3, [sp, #12]
 102              	.LBE5:
 371:Src/main.c    **** 
 372:Src/main.c    ****   /*Configure GPIO pin Output Level */
 373:Src/main.c    ****   HAL_GPIO_WritePin(GPIOB, CSS_PGA_Pin|CSS_DAC_Pin, GPIO_PIN_RESET);
 103              		.loc 1 373 3 view .LVU23
 104 0058 0A4D     		ldr	r5, .L3+4
 105 005a 2246     		mov	r2, r4
 106 005c 0321     		movs	r1, #3
 107 005e 2846     		mov	r0, r5
 108 0060 FFF7FEFF 		bl	HAL_GPIO_WritePin
 109              	.LVL0:
 374:Src/main.c    **** 
 375:Src/main.c    ****   /*Configure GPIO pins : CSS_PGA_Pin CSS_DAC_Pin */
 376:Src/main.c    ****   GPIO_InitStruct.Pin = CSS_PGA_Pin|CSS_DAC_Pin;
 110              		.loc 1 376 3 view .LVU24
 111              		.loc 1 376 23 is_stmt 0 view .LVU25
 112 0064 0323     		movs	r3, #3
 113 0066 0493     		str	r3, [sp, #16]
 377:Src/main.c    ****   GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 114              		.loc 1 377 3 is_stmt 1 view .LVU26
 115              		.loc 1 377 24 is_stmt 0 view .LVU27
 116 0068 0123     		movs	r3, #1
 117 006a 0593     		str	r3, [sp, #20]
 378:Src/main.c    ****   GPIO_InitStruct.Pull = GPIO_NOPULL;
 118              		.loc 1 378 3 is_stmt 1 view .LVU28
 119              		.loc 1 378 24 is_stmt 0 view .LVU29
 120 006c 0694     		str	r4, [sp, #24]
 379:Src/main.c    ****   GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
 121              		.loc 1 379 3 is_stmt 1 view .LVU30
 122              		.loc 1 379 25 is_stmt 0 view .LVU31
 123 006e 0223     		movs	r3, #2
 124 0070 0793     		str	r3, [sp, #28]
 380:Src/main.c    ****   HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);
 125              		.loc 1 380 3 is_stmt 1 view .LVU32
 126 0072 04A9     		add	r1, sp, #16
 127 0074 2846     		mov	r0, r5
 128 0076 FFF7FEFF 		bl	HAL_GPIO_Init
 129              	.LVL1:
 381:Src/main.c    **** 
 382:Src/main.c    **** }
 130              		.loc 1 382 1 is_stmt 0 view .LVU33
 131 007a 09B0     		add	sp, sp, #36
 132              	.LCFI2:
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 10


 133              		.cfi_def_cfa_offset 12
 134              		@ sp needed
 135 007c 30BD     		pop	{r4, r5, pc}
 136              	.L4:
 137 007e 00BF     		.align	2
 138              	.L3:
 139 0080 00100240 		.word	1073876992
 140 0084 000C0140 		.word	1073810432
 141              		.cfi_endproc
 142              	.LFE74:
 144              		.section	.text.MX_ADC1_Init,"ax",%progbits
 145              		.align	1
 146              		.syntax unified
 147              		.thumb
 148              		.thumb_func
 149              		.fpu softvfp
 151              	MX_ADC1_Init:
 152              	.LFB70:
 214:Src/main.c    **** 
 153              		.loc 1 214 1 is_stmt 1 view -0
 154              		.cfi_startproc
 155              		@ args = 0, pretend = 0, frame = 16
 156              		@ frame_needed = 0, uses_anonymous_args = 0
 157 0000 70B5     		push	{r4, r5, r6, lr}
 158              	.LCFI3:
 159              		.cfi_def_cfa_offset 16
 160              		.cfi_offset 4, -16
 161              		.cfi_offset 5, -12
 162              		.cfi_offset 6, -8
 163              		.cfi_offset 14, -4
 164 0002 84B0     		sub	sp, sp, #16
 165              	.LCFI4:
 166              		.cfi_def_cfa_offset 32
 220:Src/main.c    **** 
 167              		.loc 1 220 3 view .LVU35
 220:Src/main.c    **** 
 168              		.loc 1 220 26 is_stmt 0 view .LVU36
 169 0004 0025     		movs	r5, #0
 170 0006 0195     		str	r5, [sp, #4]
 171 0008 0295     		str	r5, [sp, #8]
 172 000a 0395     		str	r5, [sp, #12]
 227:Src/main.c    ****   hadc1.Init.ScanConvMode = ADC_SCAN_DISABLE;
 173              		.loc 1 227 3 is_stmt 1 view .LVU37
 227:Src/main.c    ****   hadc1.Init.ScanConvMode = ADC_SCAN_DISABLE;
 174              		.loc 1 227 18 is_stmt 0 view .LVU38
 175 000c 0B4C     		ldr	r4, .L7
 176 000e 0C4B     		ldr	r3, .L7+4
 177 0010 2360     		str	r3, [r4]
 228:Src/main.c    ****   hadc1.Init.ContinuousConvMode = DISABLE;
 178              		.loc 1 228 3 is_stmt 1 view .LVU39
 228:Src/main.c    ****   hadc1.Init.ContinuousConvMode = DISABLE;
 179              		.loc 1 228 27 is_stmt 0 view .LVU40
 180 0012 A560     		str	r5, [r4, #8]
 229:Src/main.c    ****   hadc1.Init.DiscontinuousConvMode = DISABLE;
 181              		.loc 1 229 3 is_stmt 1 view .LVU41
 229:Src/main.c    ****   hadc1.Init.DiscontinuousConvMode = DISABLE;
 182              		.loc 1 229 33 is_stmt 0 view .LVU42
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 11


 183 0014 2573     		strb	r5, [r4, #12]
 230:Src/main.c    ****   hadc1.Init.ExternalTrigConv = ADC_SOFTWARE_START;
 184              		.loc 1 230 3 is_stmt 1 view .LVU43
 230:Src/main.c    ****   hadc1.Init.ExternalTrigConv = ADC_SOFTWARE_START;
 185              		.loc 1 230 36 is_stmt 0 view .LVU44
 186 0016 2575     		strb	r5, [r4, #20]
 231:Src/main.c    ****   hadc1.Init.DataAlign = ADC_DATAALIGN_RIGHT;
 187              		.loc 1 231 3 is_stmt 1 view .LVU45
 231:Src/main.c    ****   hadc1.Init.DataAlign = ADC_DATAALIGN_RIGHT;
 188              		.loc 1 231 31 is_stmt 0 view .LVU46
 189 0018 4FF46023 		mov	r3, #917504
 190 001c E361     		str	r3, [r4, #28]
 232:Src/main.c    ****   hadc1.Init.NbrOfConversion = 1;
 191              		.loc 1 232 3 is_stmt 1 view .LVU47
 232:Src/main.c    ****   hadc1.Init.NbrOfConversion = 1;
 192              		.loc 1 232 24 is_stmt 0 view .LVU48
 193 001e 6560     		str	r5, [r4, #4]
 233:Src/main.c    ****   if (HAL_ADC_Init(&hadc1) != HAL_OK)
 194              		.loc 1 233 3 is_stmt 1 view .LVU49
 233:Src/main.c    ****   if (HAL_ADC_Init(&hadc1) != HAL_OK)
 195              		.loc 1 233 30 is_stmt 0 view .LVU50
 196 0020 0126     		movs	r6, #1
 197 0022 2661     		str	r6, [r4, #16]
 234:Src/main.c    ****   {
 198              		.loc 1 234 3 is_stmt 1 view .LVU51
 234:Src/main.c    ****   {
 199              		.loc 1 234 7 is_stmt 0 view .LVU52
 200 0024 2046     		mov	r0, r4
 201 0026 FFF7FEFF 		bl	HAL_ADC_Init
 202              	.LVL2:
 240:Src/main.c    ****   sConfig.Rank = ADC_REGULAR_RANK_1;
 203              		.loc 1 240 3 is_stmt 1 view .LVU53
 240:Src/main.c    ****   sConfig.Rank = ADC_REGULAR_RANK_1;
 204              		.loc 1 240 19 is_stmt 0 view .LVU54
 205 002a 0195     		str	r5, [sp, #4]
 241:Src/main.c    ****   sConfig.SamplingTime = ADC_SAMPLETIME_1CYCLE_5;
 206              		.loc 1 241 3 is_stmt 1 view .LVU55
 241:Src/main.c    ****   sConfig.SamplingTime = ADC_SAMPLETIME_1CYCLE_5;
 207              		.loc 1 241 16 is_stmt 0 view .LVU56
 208 002c 0296     		str	r6, [sp, #8]
 242:Src/main.c    ****   if (HAL_ADC_ConfigChannel(&hadc1, &sConfig) != HAL_OK)
 209              		.loc 1 242 3 is_stmt 1 view .LVU57
 242:Src/main.c    ****   if (HAL_ADC_ConfigChannel(&hadc1, &sConfig) != HAL_OK)
 210              		.loc 1 242 24 is_stmt 0 view .LVU58
 211 002e 0395     		str	r5, [sp, #12]
 243:Src/main.c    ****   {
 212              		.loc 1 243 3 is_stmt 1 view .LVU59
 243:Src/main.c    ****   {
 213              		.loc 1 243 7 is_stmt 0 view .LVU60
 214 0030 01A9     		add	r1, sp, #4
 215 0032 2046     		mov	r0, r4
 216 0034 FFF7FEFF 		bl	HAL_ADC_ConfigChannel
 217              	.LVL3:
 251:Src/main.c    **** 
 218              		.loc 1 251 1 view .LVU61
 219 0038 04B0     		add	sp, sp, #16
 220              	.LCFI5:
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 12


 221              		.cfi_def_cfa_offset 16
 222              		@ sp needed
 223 003a 70BD     		pop	{r4, r5, r6, pc}
 224              	.L8:
 225              		.align	2
 226              	.L7:
 227 003c 00000000 		.word	hadc1
 228 0040 00240140 		.word	1073816576
 229              		.cfi_endproc
 230              	.LFE70:
 232              		.section	.text.MX_SPI1_Init,"ax",%progbits
 233              		.align	1
 234              		.syntax unified
 235              		.thumb
 236              		.thumb_func
 237              		.fpu softvfp
 239              	MX_SPI1_Init:
 240              	.LFB71:
 259:Src/main.c    **** 
 241              		.loc 1 259 1 is_stmt 1 view -0
 242              		.cfi_startproc
 243              		@ args = 0, pretend = 0, frame = 0
 244              		@ frame_needed = 0, uses_anonymous_args = 0
 245 0000 08B5     		push	{r3, lr}
 246              	.LCFI6:
 247              		.cfi_def_cfa_offset 8
 248              		.cfi_offset 3, -8
 249              		.cfi_offset 14, -4
 269:Src/main.c    ****   hspi1.Init.Mode = SPI_MODE_MASTER;
 250              		.loc 1 269 3 view .LVU63
 269:Src/main.c    ****   hspi1.Init.Mode = SPI_MODE_MASTER;
 251              		.loc 1 269 18 is_stmt 0 view .LVU64
 252 0002 0E48     		ldr	r0, .L11
 253 0004 0E4B     		ldr	r3, .L11+4
 254 0006 0360     		str	r3, [r0]
 270:Src/main.c    ****   hspi1.Init.Direction = SPI_DIRECTION_1LINE;
 255              		.loc 1 270 3 is_stmt 1 view .LVU65
 270:Src/main.c    ****   hspi1.Init.Direction = SPI_DIRECTION_1LINE;
 256              		.loc 1 270 19 is_stmt 0 view .LVU66
 257 0008 4FF48273 		mov	r3, #260
 258 000c 4360     		str	r3, [r0, #4]
 271:Src/main.c    ****   hspi1.Init.DataSize = SPI_DATASIZE_8BIT;
 259              		.loc 1 271 3 is_stmt 1 view .LVU67
 271:Src/main.c    ****   hspi1.Init.DataSize = SPI_DATASIZE_8BIT;
 260              		.loc 1 271 24 is_stmt 0 view .LVU68
 261 000e 4FF40043 		mov	r3, #32768
 262 0012 8360     		str	r3, [r0, #8]
 272:Src/main.c    ****   hspi1.Init.CLKPolarity = SPI_POLARITY_HIGH;
 263              		.loc 1 272 3 is_stmt 1 view .LVU69
 272:Src/main.c    ****   hspi1.Init.CLKPolarity = SPI_POLARITY_HIGH;
 264              		.loc 1 272 23 is_stmt 0 view .LVU70
 265 0014 0023     		movs	r3, #0
 266 0016 C360     		str	r3, [r0, #12]
 273:Src/main.c    ****   hspi1.Init.CLKPhase = SPI_PHASE_2EDGE;
 267              		.loc 1 273 3 is_stmt 1 view .LVU71
 273:Src/main.c    ****   hspi1.Init.CLKPhase = SPI_PHASE_2EDGE;
 268              		.loc 1 273 26 is_stmt 0 view .LVU72
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 13


 269 0018 0222     		movs	r2, #2
 270 001a 0261     		str	r2, [r0, #16]
 274:Src/main.c    ****   hspi1.Init.NSS = SPI_NSS_SOFT;
 271              		.loc 1 274 3 is_stmt 1 view .LVU73
 274:Src/main.c    ****   hspi1.Init.NSS = SPI_NSS_SOFT;
 272              		.loc 1 274 23 is_stmt 0 view .LVU74
 273 001c 0122     		movs	r2, #1
 274 001e 4261     		str	r2, [r0, #20]
 275:Src/main.c    ****   hspi1.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_4;
 275              		.loc 1 275 3 is_stmt 1 view .LVU75
 275:Src/main.c    ****   hspi1.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_4;
 276              		.loc 1 275 18 is_stmt 0 view .LVU76
 277 0020 4FF40072 		mov	r2, #512
 278 0024 8261     		str	r2, [r0, #24]
 276:Src/main.c    ****   hspi1.Init.FirstBit = SPI_FIRSTBIT_MSB;
 279              		.loc 1 276 3 is_stmt 1 view .LVU77
 276:Src/main.c    ****   hspi1.Init.FirstBit = SPI_FIRSTBIT_MSB;
 280              		.loc 1 276 32 is_stmt 0 view .LVU78
 281 0026 0822     		movs	r2, #8
 282 0028 C261     		str	r2, [r0, #28]
 277:Src/main.c    ****   hspi1.Init.TIMode = SPI_TIMODE_DISABLE;
 283              		.loc 1 277 3 is_stmt 1 view .LVU79
 277:Src/main.c    ****   hspi1.Init.TIMode = SPI_TIMODE_DISABLE;
 284              		.loc 1 277 23 is_stmt 0 view .LVU80
 285 002a 0362     		str	r3, [r0, #32]
 278:Src/main.c    ****   hspi1.Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
 286              		.loc 1 278 3 is_stmt 1 view .LVU81
 278:Src/main.c    ****   hspi1.Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
 287              		.loc 1 278 21 is_stmt 0 view .LVU82
 288 002c 4362     		str	r3, [r0, #36]
 279:Src/main.c    ****   hspi1.Init.CRCPolynomial = 10;
 289              		.loc 1 279 3 is_stmt 1 view .LVU83
 279:Src/main.c    ****   hspi1.Init.CRCPolynomial = 10;
 290              		.loc 1 279 29 is_stmt 0 view .LVU84
 291 002e 8362     		str	r3, [r0, #40]
 280:Src/main.c    ****   if (HAL_SPI_Init(&hspi1) != HAL_OK)
 292              		.loc 1 280 3 is_stmt 1 view .LVU85
 280:Src/main.c    ****   if (HAL_SPI_Init(&hspi1) != HAL_OK)
 293              		.loc 1 280 28 is_stmt 0 view .LVU86
 294 0030 0A23     		movs	r3, #10
 295 0032 C362     		str	r3, [r0, #44]
 281:Src/main.c    ****   {
 296              		.loc 1 281 3 is_stmt 1 view .LVU87
 281:Src/main.c    ****   {
 297              		.loc 1 281 7 is_stmt 0 view .LVU88
 298 0034 FFF7FEFF 		bl	HAL_SPI_Init
 299              	.LVL4:
 289:Src/main.c    **** 
 300              		.loc 1 289 1 view .LVU89
 301 0038 08BD     		pop	{r3, pc}
 302              	.L12:
 303 003a 00BF     		.align	2
 304              	.L11:
 305 003c 00000000 		.word	hspi1
 306 0040 00300140 		.word	1073819648
 307              		.cfi_endproc
 308              	.LFE71:
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 14


 310              		.section	.text.MX_USART1_UART_Init,"ax",%progbits
 311              		.align	1
 312              		.syntax unified
 313              		.thumb
 314              		.thumb_func
 315              		.fpu softvfp
 317              	MX_USART1_UART_Init:
 318              	.LFB72:
 297:Src/main.c    **** 
 319              		.loc 1 297 1 is_stmt 1 view -0
 320              		.cfi_startproc
 321              		@ args = 0, pretend = 0, frame = 0
 322              		@ frame_needed = 0, uses_anonymous_args = 0
 323 0000 08B5     		push	{r3, lr}
 324              	.LCFI7:
 325              		.cfi_def_cfa_offset 8
 326              		.cfi_offset 3, -8
 327              		.cfi_offset 14, -4
 306:Src/main.c    ****   huart1.Init.BaudRate = 460800;
 328              		.loc 1 306 3 view .LVU91
 306:Src/main.c    ****   huart1.Init.BaudRate = 460800;
 329              		.loc 1 306 19 is_stmt 0 view .LVU92
 330 0002 0848     		ldr	r0, .L15
 331 0004 084B     		ldr	r3, .L15+4
 332 0006 0360     		str	r3, [r0]
 307:Src/main.c    ****   huart1.Init.WordLength = UART_WORDLENGTH_8B;
 333              		.loc 1 307 3 is_stmt 1 view .LVU93
 307:Src/main.c    ****   huart1.Init.WordLength = UART_WORDLENGTH_8B;
 334              		.loc 1 307 24 is_stmt 0 view .LVU94
 335 0008 4FF4E123 		mov	r3, #460800
 336 000c 4360     		str	r3, [r0, #4]
 308:Src/main.c    ****   huart1.Init.StopBits = UART_STOPBITS_1;
 337              		.loc 1 308 3 is_stmt 1 view .LVU95
 308:Src/main.c    ****   huart1.Init.StopBits = UART_STOPBITS_1;
 338              		.loc 1 308 26 is_stmt 0 view .LVU96
 339 000e 0023     		movs	r3, #0
 340 0010 8360     		str	r3, [r0, #8]
 309:Src/main.c    ****   huart1.Init.Parity = UART_PARITY_NONE;
 341              		.loc 1 309 3 is_stmt 1 view .LVU97
 309:Src/main.c    ****   huart1.Init.Parity = UART_PARITY_NONE;
 342              		.loc 1 309 24 is_stmt 0 view .LVU98
 343 0012 C360     		str	r3, [r0, #12]
 310:Src/main.c    ****   huart1.Init.Mode = UART_MODE_TX_RX;
 344              		.loc 1 310 3 is_stmt 1 view .LVU99
 310:Src/main.c    ****   huart1.Init.Mode = UART_MODE_TX_RX;
 345              		.loc 1 310 22 is_stmt 0 view .LVU100
 346 0014 0361     		str	r3, [r0, #16]
 311:Src/main.c    ****   huart1.Init.HwFlowCtl = UART_HWCONTROL_NONE;
 347              		.loc 1 311 3 is_stmt 1 view .LVU101
 311:Src/main.c    ****   huart1.Init.HwFlowCtl = UART_HWCONTROL_NONE;
 348              		.loc 1 311 20 is_stmt 0 view .LVU102
 349 0016 0C22     		movs	r2, #12
 350 0018 4261     		str	r2, [r0, #20]
 312:Src/main.c    ****   huart1.Init.OverSampling = UART_OVERSAMPLING_16;
 351              		.loc 1 312 3 is_stmt 1 view .LVU103
 312:Src/main.c    ****   huart1.Init.OverSampling = UART_OVERSAMPLING_16;
 352              		.loc 1 312 25 is_stmt 0 view .LVU104
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 15


 353 001a 8361     		str	r3, [r0, #24]
 313:Src/main.c    ****   if (HAL_UART_Init(&huart1) != HAL_OK)
 354              		.loc 1 313 3 is_stmt 1 view .LVU105
 313:Src/main.c    ****   if (HAL_UART_Init(&huart1) != HAL_OK)
 355              		.loc 1 313 28 is_stmt 0 view .LVU106
 356 001c C361     		str	r3, [r0, #28]
 314:Src/main.c    ****   {
 357              		.loc 1 314 3 is_stmt 1 view .LVU107
 314:Src/main.c    ****   {
 358              		.loc 1 314 7 is_stmt 0 view .LVU108
 359 001e FFF7FEFF 		bl	HAL_UART_Init
 360              	.LVL5:
 322:Src/main.c    **** 
 361              		.loc 1 322 1 view .LVU109
 362 0022 08BD     		pop	{r3, pc}
 363              	.L16:
 364              		.align	2
 365              	.L15:
 366 0024 00000000 		.word	huart1
 367 0028 00380140 		.word	1073821696
 368              		.cfi_endproc
 369              	.LFE72:
 371              		.section	.text.MX_USART2_UART_Init,"ax",%progbits
 372              		.align	1
 373              		.syntax unified
 374              		.thumb
 375              		.thumb_func
 376              		.fpu softvfp
 378              	MX_USART2_UART_Init:
 379              	.LFB73:
 330:Src/main.c    **** 
 380              		.loc 1 330 1 is_stmt 1 view -0
 381              		.cfi_startproc
 382              		@ args = 0, pretend = 0, frame = 0
 383              		@ frame_needed = 0, uses_anonymous_args = 0
 384 0000 08B5     		push	{r3, lr}
 385              	.LCFI8:
 386              		.cfi_def_cfa_offset 8
 387              		.cfi_offset 3, -8
 388              		.cfi_offset 14, -4
 339:Src/main.c    ****   huart2.Init.BaudRate = 4800;
 389              		.loc 1 339 3 view .LVU111
 339:Src/main.c    ****   huart2.Init.BaudRate = 4800;
 390              		.loc 1 339 19 is_stmt 0 view .LVU112
 391 0002 0848     		ldr	r0, .L19
 392 0004 084B     		ldr	r3, .L19+4
 393 0006 0360     		str	r3, [r0]
 340:Src/main.c    ****   huart2.Init.WordLength = UART_WORDLENGTH_8B;
 394              		.loc 1 340 3 is_stmt 1 view .LVU113
 340:Src/main.c    ****   huart2.Init.WordLength = UART_WORDLENGTH_8B;
 395              		.loc 1 340 24 is_stmt 0 view .LVU114
 396 0008 4FF49653 		mov	r3, #4800
 397 000c 4360     		str	r3, [r0, #4]
 341:Src/main.c    ****   huart2.Init.StopBits = UART_STOPBITS_1;
 398              		.loc 1 341 3 is_stmt 1 view .LVU115
 341:Src/main.c    ****   huart2.Init.StopBits = UART_STOPBITS_1;
 399              		.loc 1 341 26 is_stmt 0 view .LVU116
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 16


 400 000e 0023     		movs	r3, #0
 401 0010 8360     		str	r3, [r0, #8]
 342:Src/main.c    ****   huart2.Init.Parity = UART_PARITY_NONE;
 402              		.loc 1 342 3 is_stmt 1 view .LVU117
 342:Src/main.c    ****   huart2.Init.Parity = UART_PARITY_NONE;
 403              		.loc 1 342 24 is_stmt 0 view .LVU118
 404 0012 C360     		str	r3, [r0, #12]
 343:Src/main.c    ****   huart2.Init.Mode = UART_MODE_TX_RX;
 405              		.loc 1 343 3 is_stmt 1 view .LVU119
 343:Src/main.c    ****   huart2.Init.Mode = UART_MODE_TX_RX;
 406              		.loc 1 343 22 is_stmt 0 view .LVU120
 407 0014 0361     		str	r3, [r0, #16]
 344:Src/main.c    ****   huart2.Init.HwFlowCtl = UART_HWCONTROL_NONE;
 408              		.loc 1 344 3 is_stmt 1 view .LVU121
 344:Src/main.c    ****   huart2.Init.HwFlowCtl = UART_HWCONTROL_NONE;
 409              		.loc 1 344 20 is_stmt 0 view .LVU122
 410 0016 0C22     		movs	r2, #12
 411 0018 4261     		str	r2, [r0, #20]
 345:Src/main.c    ****   huart2.Init.OverSampling = UART_OVERSAMPLING_16;
 412              		.loc 1 345 3 is_stmt 1 view .LVU123
 345:Src/main.c    ****   huart2.Init.OverSampling = UART_OVERSAMPLING_16;
 413              		.loc 1 345 25 is_stmt 0 view .LVU124
 414 001a 8361     		str	r3, [r0, #24]
 346:Src/main.c    ****   if (HAL_UART_Init(&huart2) != HAL_OK)
 415              		.loc 1 346 3 is_stmt 1 view .LVU125
 346:Src/main.c    ****   if (HAL_UART_Init(&huart2) != HAL_OK)
 416              		.loc 1 346 28 is_stmt 0 view .LVU126
 417 001c C361     		str	r3, [r0, #28]
 347:Src/main.c    ****   {
 418              		.loc 1 347 3 is_stmt 1 view .LVU127
 347:Src/main.c    ****   {
 419              		.loc 1 347 7 is_stmt 0 view .LVU128
 420 001e FFF7FEFF 		bl	HAL_UART_Init
 421              	.LVL6:
 355:Src/main.c    **** 
 422              		.loc 1 355 1 view .LVU129
 423 0022 08BD     		pop	{r3, pc}
 424              	.L20:
 425              		.align	2
 426              	.L19:
 427 0024 00000000 		.word	huart2
 428 0028 00440040 		.word	1073759232
 429              		.cfi_endproc
 430              	.LFE73:
 432              		.section	.text.SystemClock_Config,"ax",%progbits
 433              		.align	1
 434              		.global	SystemClock_Config
 435              		.syntax unified
 436              		.thumb
 437              		.thumb_func
 438              		.fpu softvfp
 440              	SystemClock_Config:
 441              	.LFB69:
 169:Src/main.c    ****   RCC_OscInitTypeDef RCC_OscInitStruct = {0};
 442              		.loc 1 169 1 is_stmt 1 view -0
 443              		.cfi_startproc
 444              		@ args = 0, pretend = 0, frame = 80
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 17


 445              		@ frame_needed = 0, uses_anonymous_args = 0
 446 0000 30B5     		push	{r4, r5, lr}
 447              	.LCFI9:
 448              		.cfi_def_cfa_offset 12
 449              		.cfi_offset 4, -12
 450              		.cfi_offset 5, -8
 451              		.cfi_offset 14, -4
 452 0002 95B0     		sub	sp, sp, #84
 453              	.LCFI10:
 454              		.cfi_def_cfa_offset 96
 170:Src/main.c    ****   RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};
 455              		.loc 1 170 3 view .LVU131
 170:Src/main.c    ****   RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};
 456              		.loc 1 170 22 is_stmt 0 view .LVU132
 457 0004 0024     		movs	r4, #0
 458 0006 0C94     		str	r4, [sp, #48]
 459 0008 0D94     		str	r4, [sp, #52]
 460 000a 0F94     		str	r4, [sp, #60]
 461 000c 1094     		str	r4, [sp, #64]
 171:Src/main.c    ****   RCC_PeriphCLKInitTypeDef PeriphClkInit = {0};
 462              		.loc 1 171 3 is_stmt 1 view .LVU133
 171:Src/main.c    ****   RCC_PeriphCLKInitTypeDef PeriphClkInit = {0};
 463              		.loc 1 171 22 is_stmt 0 view .LVU134
 464 000e 0594     		str	r4, [sp, #20]
 465 0010 0694     		str	r4, [sp, #24]
 466 0012 0794     		str	r4, [sp, #28]
 467 0014 0894     		str	r4, [sp, #32]
 468 0016 0994     		str	r4, [sp, #36]
 172:Src/main.c    **** 
 469              		.loc 1 172 3 is_stmt 1 view .LVU135
 172:Src/main.c    **** 
 470              		.loc 1 172 28 is_stmt 0 view .LVU136
 471 0018 0194     		str	r4, [sp, #4]
 472 001a 0294     		str	r4, [sp, #8]
 473 001c 0394     		str	r4, [sp, #12]
 474 001e 0494     		str	r4, [sp, #16]
 176:Src/main.c    ****   RCC_OscInitStruct.HSEState = RCC_HSE_ON;
 475              		.loc 1 176 3 is_stmt 1 view .LVU137
 176:Src/main.c    ****   RCC_OscInitStruct.HSEState = RCC_HSE_ON;
 476              		.loc 1 176 36 is_stmt 0 view .LVU138
 477 0020 0122     		movs	r2, #1
 478 0022 0A92     		str	r2, [sp, #40]
 177:Src/main.c    ****   RCC_OscInitStruct.HSEPredivValue = RCC_HSE_PREDIV_DIV1;
 479              		.loc 1 177 3 is_stmt 1 view .LVU139
 177:Src/main.c    ****   RCC_OscInitStruct.HSEPredivValue = RCC_HSE_PREDIV_DIV1;
 480              		.loc 1 177 30 is_stmt 0 view .LVU140
 481 0024 4FF48033 		mov	r3, #65536
 482 0028 0B93     		str	r3, [sp, #44]
 178:Src/main.c    ****   RCC_OscInitStruct.HSIState = RCC_HSI_ON;
 483              		.loc 1 178 3 is_stmt 1 view .LVU141
 179:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
 484              		.loc 1 179 3 view .LVU142
 179:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
 485              		.loc 1 179 30 is_stmt 0 view .LVU143
 486 002a 0E92     		str	r2, [sp, #56]
 180:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;
 487              		.loc 1 180 3 is_stmt 1 view .LVU144
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 18


 180:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;
 488              		.loc 1 180 34 is_stmt 0 view .LVU145
 489 002c 0225     		movs	r5, #2
 490 002e 1195     		str	r5, [sp, #68]
 181:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLMUL = RCC_PLL_MUL9;
 491              		.loc 1 181 3 is_stmt 1 view .LVU146
 181:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLMUL = RCC_PLL_MUL9;
 492              		.loc 1 181 35 is_stmt 0 view .LVU147
 493 0030 1293     		str	r3, [sp, #72]
 182:Src/main.c    ****   if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
 494              		.loc 1 182 3 is_stmt 1 view .LVU148
 182:Src/main.c    ****   if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
 495              		.loc 1 182 32 is_stmt 0 view .LVU149
 496 0032 4FF4E013 		mov	r3, #1835008
 497 0036 1393     		str	r3, [sp, #76]
 183:Src/main.c    ****   {
 498              		.loc 1 183 3 is_stmt 1 view .LVU150
 183:Src/main.c    ****   {
 499              		.loc 1 183 7 is_stmt 0 view .LVU151
 500 0038 0AA8     		add	r0, sp, #40
 501 003a FFF7FEFF 		bl	HAL_RCC_OscConfig
 502              	.LVL7:
 189:Src/main.c    ****                               |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
 503              		.loc 1 189 3 is_stmt 1 view .LVU152
 189:Src/main.c    ****                               |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
 504              		.loc 1 189 31 is_stmt 0 view .LVU153
 505 003e 0F23     		movs	r3, #15
 506 0040 0593     		str	r3, [sp, #20]
 191:Src/main.c    ****   RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
 507              		.loc 1 191 3 is_stmt 1 view .LVU154
 191:Src/main.c    ****   RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
 508              		.loc 1 191 34 is_stmt 0 view .LVU155
 509 0042 0695     		str	r5, [sp, #24]
 192:Src/main.c    ****   RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV2;
 510              		.loc 1 192 3 is_stmt 1 view .LVU156
 192:Src/main.c    ****   RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV2;
 511              		.loc 1 192 35 is_stmt 0 view .LVU157
 512 0044 0794     		str	r4, [sp, #28]
 193:Src/main.c    ****   RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;
 513              		.loc 1 193 3 is_stmt 1 view .LVU158
 193:Src/main.c    ****   RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;
 514              		.loc 1 193 36 is_stmt 0 view .LVU159
 515 0046 4FF48063 		mov	r3, #1024
 516 004a 0893     		str	r3, [sp, #32]
 194:Src/main.c    **** 
 517              		.loc 1 194 3 is_stmt 1 view .LVU160
 194:Src/main.c    **** 
 518              		.loc 1 194 36 is_stmt 0 view .LVU161
 519 004c 0994     		str	r4, [sp, #36]
 196:Src/main.c    ****   {
 520              		.loc 1 196 3 is_stmt 1 view .LVU162
 196:Src/main.c    ****   {
 521              		.loc 1 196 7 is_stmt 0 view .LVU163
 522 004e 2946     		mov	r1, r5
 523 0050 05A8     		add	r0, sp, #20
 524 0052 FFF7FEFF 		bl	HAL_RCC_ClockConfig
 525              	.LVL8:
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 19


 200:Src/main.c    ****   PeriphClkInit.AdcClockSelection = RCC_ADCPCLK2_DIV6;
 526              		.loc 1 200 3 is_stmt 1 view .LVU164
 200:Src/main.c    ****   PeriphClkInit.AdcClockSelection = RCC_ADCPCLK2_DIV6;
 527              		.loc 1 200 38 is_stmt 0 view .LVU165
 528 0056 0195     		str	r5, [sp, #4]
 201:Src/main.c    ****   if (HAL_RCCEx_PeriphCLKConfig(&PeriphClkInit) != HAL_OK)
 529              		.loc 1 201 3 is_stmt 1 view .LVU166
 201:Src/main.c    ****   if (HAL_RCCEx_PeriphCLKConfig(&PeriphClkInit) != HAL_OK)
 530              		.loc 1 201 35 is_stmt 0 view .LVU167
 531 0058 4FF40043 		mov	r3, #32768
 532 005c 0393     		str	r3, [sp, #12]
 202:Src/main.c    ****   {
 533              		.loc 1 202 3 is_stmt 1 view .LVU168
 202:Src/main.c    ****   {
 534              		.loc 1 202 7 is_stmt 0 view .LVU169
 535 005e 01A8     		add	r0, sp, #4
 536 0060 FFF7FEFF 		bl	HAL_RCCEx_PeriphCLKConfig
 537              	.LVL9:
 206:Src/main.c    **** 
 538              		.loc 1 206 1 view .LVU170
 539 0064 15B0     		add	sp, sp, #84
 540              	.LCFI11:
 541              		.cfi_def_cfa_offset 12
 542              		@ sp needed
 543 0066 30BD     		pop	{r4, r5, pc}
 544              		.cfi_endproc
 545              	.LFE69:
 547              		.section	.text.setGain,"ax",%progbits
 548              		.align	1
 549              		.global	setGain
 550              		.syntax unified
 551              		.thumb
 552              		.thumb_func
 553              		.fpu softvfp
 555              	setGain:
 556              	.LVL10:
 557              	.LFB75:
 383:Src/main.c    **** 
 384:Src/main.c    **** /* USER CODE BEGIN 4 */
 385:Src/main.c    **** void setGain(gain_t new_gain)
 386:Src/main.c    **** {
 558              		.loc 1 386 1 is_stmt 1 view -0
 559              		.cfi_startproc
 560              		@ args = 0, pretend = 0, frame = 0
 561              		@ frame_needed = 0, uses_anonymous_args = 0
 562              		.loc 1 386 1 is_stmt 0 view .LVU172
 563 0000 38B5     		push	{r3, r4, r5, lr}
 564              	.LCFI12:
 565              		.cfi_def_cfa_offset 16
 566              		.cfi_offset 3, -16
 567              		.cfi_offset 4, -12
 568              		.cfi_offset 5, -8
 569              		.cfi_offset 14, -4
 570 0002 0546     		mov	r5, r0
 387:Src/main.c    **** 	memset(&SPI_msg[0], 0, MAX_LOG_MSG_SIZE);
 571              		.loc 1 387 2 is_stmt 1 view .LVU173
 572 0004 104C     		ldr	r4, .L25
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 20


 573 0006 7E22     		movs	r2, #126
 574 0008 0021     		movs	r1, #0
 575 000a A01C     		adds	r0, r4, #2
 576              	.LVL11:
 577              		.loc 1 387 2 is_stmt 0 view .LVU174
 578 000c FFF7FEFF 		bl	memset
 579              	.LVL12:
 388:Src/main.c    **** 	SPI_msg[0] = 0x40;
 580              		.loc 1 388 2 is_stmt 1 view .LVU175
 581              		.loc 1 388 13 is_stmt 0 view .LVU176
 582 0010 4023     		movs	r3, #64
 583 0012 2370     		strb	r3, [r4]
 389:Src/main.c    ****     SPI_msg[1] = new_gain;
 584              		.loc 1 389 5 is_stmt 1 view .LVU177
 585              		.loc 1 389 16 is_stmt 0 view .LVU178
 586 0014 6570     		strb	r5, [r4, #1]
 390:Src/main.c    ****     HAL_GPIO_WritePin(CSS_PGA_GPIO_Port, CSS_PGA_Pin, GPIO_PIN_RESET);
 587              		.loc 1 390 5 is_stmt 1 view .LVU179
 588 0016 0D4D     		ldr	r5, .L25+4
 589 0018 0022     		movs	r2, #0
 590 001a 0121     		movs	r1, #1
 591 001c 2846     		mov	r0, r5
 592 001e FFF7FEFF 		bl	HAL_GPIO_WritePin
 593              	.LVL13:
 391:Src/main.c    ****     HAL_SPI_Transmit(&hspi1, &SPI_msg[0], 2, HAL_MAX_DELAY);
 594              		.loc 1 391 5 view .LVU180
 595 0022 4FF0FF33 		mov	r3, #-1
 596 0026 0222     		movs	r2, #2
 597 0028 2146     		mov	r1, r4
 598 002a 0948     		ldr	r0, .L25+8
 599 002c FFF7FEFF 		bl	HAL_SPI_Transmit
 600              	.LVL14:
 392:Src/main.c    ****     HAL_GPIO_WritePin(CSS_PGA_GPIO_Port, CSS_PGA_Pin, GPIO_PIN_SET);
 601              		.loc 1 392 5 view .LVU181
 602 0030 0122     		movs	r2, #1
 603 0032 1146     		mov	r1, r2
 604 0034 2846     		mov	r0, r5
 605 0036 FFF7FEFF 		bl	HAL_GPIO_WritePin
 606              	.LVL15:
 393:Src/main.c    ****     memset(&SPI_msg[0], 0, MAX_LOG_MSG_SIZE);
 607              		.loc 1 393 5 view .LVU182
 608 003a 8022     		movs	r2, #128
 609 003c 0021     		movs	r1, #0
 610 003e 2046     		mov	r0, r4
 611 0040 FFF7FEFF 		bl	memset
 612              	.LVL16:
 394:Src/main.c    **** }
 613              		.loc 1 394 1 is_stmt 0 view .LVU183
 614 0044 38BD     		pop	{r3, r4, r5, pc}
 615              	.L26:
 616 0046 00BF     		.align	2
 617              	.L25:
 618 0048 00000000 		.word	.LANCHOR0
 619 004c 000C0140 		.word	1073810432
 620 0050 00000000 		.word	hspi1
 621              		.cfi_endproc
 622              	.LFE75:
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 21


 624              		.section	.text.setVref,"ax",%progbits
 625              		.align	1
 626              		.global	setVref
 627              		.syntax unified
 628              		.thumb
 629              		.thumb_func
 630              		.fpu softvfp
 632              	setVref:
 633              	.LVL17:
 634              	.LFB76:
 395:Src/main.c    **** 
 396:Src/main.c    **** void setVref(uint16_t _new_Vref)
 397:Src/main.c    **** {
 635              		.loc 1 397 1 is_stmt 1 view -0
 636              		.cfi_startproc
 637              		@ args = 0, pretend = 0, frame = 8
 638              		@ frame_needed = 0, uses_anonymous_args = 0
 639              		.loc 1 397 1 is_stmt 0 view .LVU185
 640 0000 30B5     		push	{r4, r5, lr}
 641              	.LCFI13:
 642              		.cfi_def_cfa_offset 12
 643              		.cfi_offset 4, -12
 644              		.cfi_offset 5, -8
 645              		.cfi_offset 14, -4
 646 0002 83B0     		sub	sp, sp, #12
 647              	.LCFI14:
 648              		.cfi_def_cfa_offset 24
 398:Src/main.c    **** 	volatile uint16_t new_Vref = _new_Vref;
 649              		.loc 1 398 2 is_stmt 1 view .LVU186
 650              		.loc 1 398 20 is_stmt 0 view .LVU187
 651 0004 ADF80600 		strh	r0, [sp, #6]	@ movhi
 399:Src/main.c    **** 	if ( new_Vref > 4095 ) new_Vref = 4095;
 652              		.loc 1 399 2 is_stmt 1 view .LVU188
 653              		.loc 1 399 16 is_stmt 0 view .LVU189
 654 0008 BDF80630 		ldrh	r3, [sp, #6]
 655 000c 9BB2     		uxth	r3, r3
 656              		.loc 1 399 5 view .LVU190
 657 000e B3F5805F 		cmp	r3, #4096
 658 0012 03D3     		bcc	.L28
 659              		.loc 1 399 25 is_stmt 1 discriminator 1 view .LVU191
 660              		.loc 1 399 34 is_stmt 0 discriminator 1 view .LVU192
 661 0014 40F6FF73 		movw	r3, #4095
 662 0018 ADF80630 		strh	r3, [sp, #6]	@ movhi
 663              	.L28:
 400:Src/main.c    **** 
 401:Src/main.c    **** 	memset(&SPI_msg[0], 0, MAX_LOG_MSG_SIZE);
 664              		.loc 1 401 2 is_stmt 1 view .LVU193
 665 001c 144C     		ldr	r4, .L30
 666 001e 7E22     		movs	r2, #126
 667 0020 0021     		movs	r1, #0
 668 0022 A01C     		adds	r0, r4, #2
 669              	.LVL18:
 670              		.loc 1 401 2 is_stmt 0 view .LVU194
 671 0024 FFF7FEFF 		bl	memset
 672              	.LVL19:
 402:Src/main.c    **** 	SPI_msg[0] = ( 0x70 | ( ( new_Vref >> 8 ) & 0xF ) );
 673              		.loc 1 402 2 is_stmt 1 view .LVU195
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 22


 674              		.loc 1 402 44 is_stmt 0 view .LVU196
 675 0028 BDF80630 		ldrh	r3, [sp, #6]
 676 002c C3F30323 		ubfx	r3, r3, #8, #4
 677              		.loc 1 402 22 view .LVU197
 678 0030 43F07003 		orr	r3, r3, #112
 679              		.loc 1 402 13 view .LVU198
 680 0034 2370     		strb	r3, [r4]
 403:Src/main.c    ****     SPI_msg[1] = ( new_Vref & 0xFF );
 681              		.loc 1 403 5 is_stmt 1 view .LVU199
 682              		.loc 1 403 16 is_stmt 0 view .LVU200
 683 0036 BDF80630 		ldrh	r3, [sp, #6]
 684 003a 6370     		strb	r3, [r4, #1]
 404:Src/main.c    ****     HAL_GPIO_WritePin(CSS_DAC_GPIO_Port, CSS_DAC_Pin, GPIO_PIN_RESET);
 685              		.loc 1 404 5 is_stmt 1 view .LVU201
 686 003c 0D4D     		ldr	r5, .L30+4
 687 003e 0022     		movs	r2, #0
 688 0040 0221     		movs	r1, #2
 689 0042 2846     		mov	r0, r5
 690 0044 FFF7FEFF 		bl	HAL_GPIO_WritePin
 691              	.LVL20:
 405:Src/main.c    ****     HAL_SPI_Transmit(&hspi1, &SPI_msg[0], 2, HAL_MAX_DELAY);
 692              		.loc 1 405 5 view .LVU202
 693 0048 4FF0FF33 		mov	r3, #-1
 694 004c 0222     		movs	r2, #2
 695 004e 2146     		mov	r1, r4
 696 0050 0948     		ldr	r0, .L30+8
 697 0052 FFF7FEFF 		bl	HAL_SPI_Transmit
 698              	.LVL21:
 406:Src/main.c    ****     HAL_GPIO_WritePin(CSS_DAC_GPIO_Port, CSS_DAC_Pin, GPIO_PIN_SET);
 699              		.loc 1 406 5 view .LVU203
 700 0056 0122     		movs	r2, #1
 701 0058 0221     		movs	r1, #2
 702 005a 2846     		mov	r0, r5
 703 005c FFF7FEFF 		bl	HAL_GPIO_WritePin
 704              	.LVL22:
 407:Src/main.c    ****     memset(&SPI_msg[0], 0, MAX_LOG_MSG_SIZE);
 705              		.loc 1 407 5 view .LVU204
 706 0060 8022     		movs	r2, #128
 707 0062 0021     		movs	r1, #0
 708 0064 2046     		mov	r0, r4
 709 0066 FFF7FEFF 		bl	memset
 710              	.LVL23:
 408:Src/main.c    **** }
 711              		.loc 1 408 1 is_stmt 0 view .LVU205
 712 006a 03B0     		add	sp, sp, #12
 713              	.LCFI15:
 714              		.cfi_def_cfa_offset 12
 715              		@ sp needed
 716 006c 30BD     		pop	{r4, r5, pc}
 717              	.L31:
 718 006e 00BF     		.align	2
 719              	.L30:
 720 0070 00000000 		.word	.LANCHOR0
 721 0074 000C0140 		.word	1073810432
 722 0078 00000000 		.word	hspi1
 723              		.cfi_endproc
 724              	.LFE76:
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 23


 726              		.global	__aeabi_fsub
 727              		.global	__aeabi_f2d
 728              		.global	__aeabi_ddiv
 729              		.global	__aeabi_d2f
 730              		.global	__aeabi_i2f
 731              		.global	__aeabi_fcmplt
 732              		.global	__aeabi_fmul
 733              		.global	__aeabi_fdiv
 734              		.global	__aeabi_d2uiz
 735              		.section	.text.main,"ax",%progbits
 736              		.align	1
 737              		.global	main
 738              		.syntax unified
 739              		.thumb
 740              		.thumb_func
 741              		.fpu softvfp
 743              	main:
 744              	.LFB68:
  80:Src/main.c    ****   /* USER CODE BEGIN 1 */
 745              		.loc 1 80 1 is_stmt 1 view -0
 746              		.cfi_startproc
 747              		@ args = 0, pretend = 0, frame = 0
 748              		@ frame_needed = 0, uses_anonymous_args = 0
 749 0000 70B5     		push	{r4, r5, r6, lr}
 750              	.LCFI16:
 751              		.cfi_def_cfa_offset 16
 752              		.cfi_offset 4, -16
 753              		.cfi_offset 5, -12
 754              		.cfi_offset 6, -8
 755              		.cfi_offset 14, -4
 756 0002 82B0     		sub	sp, sp, #8
 757              	.LCFI17:
 758              		.cfi_def_cfa_offset 24
  82:Src/main.c    ****   static const char channel_name[] = "LightSensor";
 759              		.loc 1 82 3 view .LVU207
  83:Src/main.c    ****   static volatile uint16_t lightVal = 0;
 760              		.loc 1 83 3 view .LVU208
  84:Src/main.c    ****   static volatile uint8_t zoomAndEnhance = 0;
 761              		.loc 1 84 3 view .LVU209
  85:Src/main.c    ****   static const uint8_t gain[8] = {1,2,4,5,8,10,16,32};
 762              		.loc 1 85 3 view .LVU210
  86:Src/main.c    ****   static volatile gain_t gain_idx = GAIN_OF_1;
 763              		.loc 1 86 3 view .LVU211
  87:Src/main.c    ****   static volatile float Vin_min = 0;
 764              		.loc 1 87 3 view .LVU212
  88:Src/main.c    ****   static volatile float Vin_max = 3.300;
 765              		.loc 1 88 3 view .LVU213
  89:Src/main.c    ****   static volatile uint16_t Vref = 0;
 766              		.loc 1 89 3 view .LVU214
  90:Src/main.c    ****   /* USER CODE END 1 */
 767              		.loc 1 90 3 view .LVU215
  97:Src/main.c    **** 
 768              		.loc 1 97 3 view .LVU216
 769 0004 FFF7FEFF 		bl	HAL_Init
 770              	.LVL24:
 104:Src/main.c    **** 
 771              		.loc 1 104 3 view .LVU217
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 24


 772 0008 FFF7FEFF 		bl	SystemClock_Config
 773              	.LVL25:
 111:Src/main.c    ****   MX_ADC1_Init();
 774              		.loc 1 111 3 view .LVU218
 775 000c FFF7FEFF 		bl	MX_GPIO_Init
 776              	.LVL26:
 112:Src/main.c    ****   MX_SPI1_Init();
 777              		.loc 1 112 3 view .LVU219
 778 0010 FFF7FEFF 		bl	MX_ADC1_Init
 779              	.LVL27:
 113:Src/main.c    ****   MX_USART1_UART_Init();
 780              		.loc 1 113 3 view .LVU220
 781 0014 FFF7FEFF 		bl	MX_SPI1_Init
 782              	.LVL28:
 114:Src/main.c    ****   MX_USART2_UART_Init();
 783              		.loc 1 114 3 view .LVU221
 784 0018 FFF7FEFF 		bl	MX_USART1_UART_Init
 785              	.LVL29:
 115:Src/main.c    ****   /* USER CODE BEGIN 2 */
 786              		.loc 1 115 3 view .LVU222
 787 001c FFF7FEFF 		bl	MX_USART2_UART_Init
 788              	.LVL30:
 117:Src/main.c    ****   {
 789              		.loc 1 117 3 view .LVU223
 117:Src/main.c    ****   {
 790              		.loc 1 117 7 is_stmt 0 view .LVU224
 791 0020 4748     		ldr	r0, .L40+8
 792 0022 FFF7FEFF 		bl	HAL_ADCEx_Calibration_Start
 793              	.LVL31:
 794 0026 55E0     		b	.L38
 795              	.LVL32:
 796              	.L35:
 797              	.LBB6:
 141:Src/main.c    **** 
 798              		.loc 1 141 6 is_stmt 1 view .LVU225
 799 0028 464C     		ldr	r4, .L40+12
 800              	.LVL33:
 141:Src/main.c    **** 
 801              		.loc 1 141 6 is_stmt 0 view .LVU226
 802 002a 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 803 002c FFF7FEFF 		bl	setGain
 804              	.LVL34:
 144:Src/main.c    ****     	uint16_t Vref = round( Vref_float * 4095 / 3.3f );
 805              		.loc 1 144 6 is_stmt 1 view .LVU227
 144:Src/main.c    ****     	uint16_t Vref = round( Vref_float * 4095 / 3.3f );
 806              		.loc 1 144 31 is_stmt 0 view .LVU228
 807 0030 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 808 0032 DBB2     		uxtb	r3, r3
 809 0034 444D     		ldr	r5, .L40+16
 144:Src/main.c    ****     	uint16_t Vref = round( Vref_float * 4095 / 3.3f );
 810              		.loc 1 144 42 view .LVU229
 811 0036 454A     		ldr	r2, .L40+20
 812 0038 1668     		ldr	r6, [r2]	@ float
 813 003a E85C     		ldrb	r0, [r5, r3]	@ zero_extendqisi2
 814 003c FFF7FEFF 		bl	__aeabi_i2f
 815              	.LVL35:
 816 0040 3146     		mov	r1, r6
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 25


 817 0042 FFF7FEFF 		bl	__aeabi_fmul
 818              	.LVL36:
 819 0046 0646     		mov	r6, r0
 144:Src/main.c    ****     	uint16_t Vref = round( Vref_float * 4095 / 3.3f );
 820              		.loc 1 144 62 view .LVU230
 821 0048 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 822 004a DBB2     		uxtb	r3, r3
 823 004c E85C     		ldrb	r0, [r5, r3]	@ zero_extendqisi2
 144:Src/main.c    ****     	uint16_t Vref = round( Vref_float * 4095 / 3.3f );
 824              		.loc 1 144 54 view .LVU231
 825 004e 0138     		subs	r0, r0, #1
 826 0050 FFF7FEFF 		bl	__aeabi_i2f
 827              	.LVL37:
 144:Src/main.c    ****     	uint16_t Vref = round( Vref_float * 4095 / 3.3f );
 828              		.loc 1 144 12 view .LVU232
 829 0054 0146     		mov	r1, r0
 830 0056 3046     		mov	r0, r6
 831 0058 FFF7FEFF 		bl	__aeabi_fdiv
 832              	.LVL38:
 145:Src/main.c    ****     	//update Vref
 833              		.loc 1 145 6 is_stmt 1 view .LVU233
 145:Src/main.c    ****     	//update Vref
 834              		.loc 1 145 40 is_stmt 0 view .LVU234
 835 005c 3C49     		ldr	r1, .L40+24
 836 005e FFF7FEFF 		bl	__aeabi_fmul
 837              	.LVL39:
 145:Src/main.c    ****     	//update Vref
 838              		.loc 1 145 47 view .LVU235
 839 0062 3C49     		ldr	r1, .L40+28
 840 0064 FFF7FEFF 		bl	__aeabi_fdiv
 841              	.LVL40:
 145:Src/main.c    ****     	//update Vref
 842              		.loc 1 145 22 view .LVU236
 843 0068 FFF7FEFF 		bl	__aeabi_f2d
 844              	.LVL41:
 845 006c FFF7FEFF 		bl	round
 846              	.LVL42:
 145:Src/main.c    ****     	//update Vref
 847              		.loc 1 145 15 view .LVU237
 848 0070 FFF7FEFF 		bl	__aeabi_d2uiz
 849              	.LVL43:
 147:Src/main.c    ****     }
 850              		.loc 1 147 6 is_stmt 1 view .LVU238
 851 0074 80B2     		uxth	r0, r0
 147:Src/main.c    ****     }
 852              		.loc 1 147 6 is_stmt 0 view .LVU239
 853 0076 FFF7FEFF 		bl	setVref
 854              	.LVL44:
 855              	.L33:
 147:Src/main.c    ****     }
 856              		.loc 1 147 6 view .LVU240
 857              	.LBE6:
 150:Src/main.c    ****     while( HAL_ADC_PollForConversion(&hadc1, HAL_MAX_DELAY) != HAL_OK );
 858              		.loc 1 150 5 is_stmt 1 view .LVU241
 859 007a 3148     		ldr	r0, .L40+8
 860 007c FFF7FEFF 		bl	HAL_ADC_Start
 861              	.LVL45:
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 26


 151:Src/main.c    ****     lightVal = HAL_ADC_GetValue(&hadc1);
 862              		.loc 1 151 5 view .LVU242
 863              	.L37:
 151:Src/main.c    ****     lightVal = HAL_ADC_GetValue(&hadc1);
 864              		.loc 1 151 72 discriminator 1 view .LVU243
 151:Src/main.c    ****     lightVal = HAL_ADC_GetValue(&hadc1);
 865              		.loc 1 151 12 is_stmt 0 discriminator 1 view .LVU244
 866 0080 4FF0FF31 		mov	r1, #-1
 867 0084 2E48     		ldr	r0, .L40+8
 868 0086 FFF7FEFF 		bl	HAL_ADC_PollForConversion
 869              	.LVL46:
 151:Src/main.c    ****     lightVal = HAL_ADC_GetValue(&hadc1);
 870              		.loc 1 151 10 discriminator 1 view .LVU245
 871 008a 0028     		cmp	r0, #0
 872 008c F8D1     		bne	.L37
 152:Src/main.c    ****     
 873              		.loc 1 152 5 is_stmt 1 view .LVU246
 152:Src/main.c    ****     
 874              		.loc 1 152 16 is_stmt 0 view .LVU247
 875 008e 2C48     		ldr	r0, .L40+8
 876 0090 FFF7FEFF 		bl	HAL_ADC_GetValue
 877              	.LVL47:
 152:Src/main.c    ****     
 878              		.loc 1 152 14 view .LVU248
 879 0094 80B2     		uxth	r0, r0
 880 0096 304C     		ldr	r4, .L40+32
 881 0098 2080     		strh	r0, [r4]	@ movhi
 154:Src/main.c    ****     HAL_UART_Transmit(&huart1, (uint8_t*)&ADC_msg[0], strlen(ADC_msg), HAL_MAX_DELAY);
 882              		.loc 1 154 5 is_stmt 1 view .LVU249
 154:Src/main.c    ****     HAL_UART_Transmit(&huart1, (uint8_t*)&ADC_msg[0], strlen(ADC_msg), HAL_MAX_DELAY);
 883              		.loc 1 154 108 is_stmt 0 view .LVU250
 884 009a FFF7FEFF 		bl	HAL_GetTick
 885              	.LVL48:
 154:Src/main.c    ****     HAL_UART_Transmit(&huart1, (uint8_t*)&ADC_msg[0], strlen(ADC_msg), HAL_MAX_DELAY);
 886              		.loc 1 154 5 view .LVU251
 887 009e 2388     		ldrh	r3, [r4]
 888 00a0 2E4C     		ldr	r4, .L40+36
 889 00a2 0093     		str	r3, [sp]
 890 00a4 0346     		mov	r3, r0
 891 00a6 2E4A     		ldr	r2, .L40+40
 892 00a8 2E49     		ldr	r1, .L40+44
 893 00aa 2046     		mov	r0, r4
 894 00ac FFF7FEFF 		bl	sprintf
 895              	.LVL49:
 155:Src/main.c    **** 
 896              		.loc 1 155 5 is_stmt 1 view .LVU252
 155:Src/main.c    **** 
 897              		.loc 1 155 55 is_stmt 0 view .LVU253
 898 00b0 2046     		mov	r0, r4
 899 00b2 FFF7FEFF 		bl	strlen
 900              	.LVL50:
 155:Src/main.c    **** 
 901              		.loc 1 155 5 view .LVU254
 902 00b6 4FF0FF33 		mov	r3, #-1
 903 00ba 82B2     		uxth	r2, r0
 904 00bc 2146     		mov	r1, r4
 905 00be 2A48     		ldr	r0, .L40+48
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 27


 906 00c0 FFF7FEFF 		bl	HAL_UART_Transmit
 907              	.LVL51:
 157:Src/main.c    **** 
 908              		.loc 1 157 5 is_stmt 1 view .LVU255
 909 00c4 8022     		movs	r2, #128
 910 00c6 0021     		movs	r1, #0
 911 00c8 2046     		mov	r0, r4
 912 00ca FFF7FEFF 		bl	memset
 913              	.LVL52:
 159:Src/main.c    ****   }
 914              		.loc 1 159 5 view .LVU256
 915 00ce 0520     		movs	r0, #5
 916 00d0 FFF7FEFF 		bl	HAL_Delay
 917              	.LVL53:
 918              	.L38:
 127:Src/main.c    ****   {
 919              		.loc 1 127 3 view .LVU257
 132:Src/main.c    ****     {
 920              		.loc 1 132 5 view .LVU258
 132:Src/main.c    ****     {
 921              		.loc 1 132 9 is_stmt 0 view .LVU259
 922 00d4 254B     		ldr	r3, .L40+52
 923 00d6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 132:Src/main.c    ****     {
 924              		.loc 1 132 8 view .LVU260
 925 00d8 002B     		cmp	r3, #0
 926 00da CED0     		beq	.L33
 927              	.LBB7:
 135:Src/main.c    ****     	for ( gain_idx = GAIN_OF_32; gain_idx > 0; gain_idx--)
 928              		.loc 1 135 6 is_stmt 1 view .LVU261
 135:Src/main.c    ****     	for ( gain_idx = GAIN_OF_32; gain_idx > 0; gain_idx--)
 929              		.loc 1 135 41 is_stmt 0 view .LVU262
 930 00dc 244B     		ldr	r3, .L40+56
 931 00de 1868     		ldr	r0, [r3]	@ float
 932 00e0 1A4B     		ldr	r3, .L40+20
 933 00e2 1968     		ldr	r1, [r3]	@ float
 934 00e4 FFF7FEFF 		bl	__aeabi_fsub
 935              	.LVL54:
 936 00e8 FFF7FEFF 		bl	__aeabi_f2d
 937              	.LVL55:
 135:Src/main.c    ****     	for ( gain_idx = GAIN_OF_32; gain_idx > 0; gain_idx--)
 938              		.loc 1 135 29 view .LVU263
 939 00ec 0246     		mov	r2, r0
 940 00ee 0B46     		mov	r3, r1
 941 00f0 11A1     		adr	r1, .L40
 942 00f2 D1E90001 		ldrd	r0, [r1]
 943 00f6 FFF7FEFF 		bl	__aeabi_ddiv
 944              	.LVL56:
 135:Src/main.c    ****     	for ( gain_idx = GAIN_OF_32; gain_idx > 0; gain_idx--)
 945              		.loc 1 135 12 view .LVU264
 946 00fa FFF7FEFF 		bl	__aeabi_d2f
 947              	.LVL57:
 948 00fe 0446     		mov	r4, r0
 949              	.LVL58:
 136:Src/main.c    ****     	{
 950              		.loc 1 136 6 is_stmt 1 view .LVU265
 136:Src/main.c    ****     	{
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 28


 951              		.loc 1 136 21 is_stmt 0 view .LVU266
 952 0100 104B     		ldr	r3, .L40+12
 953 0102 0722     		movs	r2, #7
 954 0104 1A70     		strb	r2, [r3]
 955              	.LVL59:
 956              	.L34:
 136:Src/main.c    ****     	{
 957              		.loc 1 136 44 discriminator 1 view .LVU267
 958 0106 0F4B     		ldr	r3, .L40+12
 959 0108 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 136:Src/main.c    ****     	{
 960              		.loc 1 136 6 discriminator 1 view .LVU268
 961 010a 002B     		cmp	r3, #0
 962 010c 8CD0     		beq	.L35
 138:Src/main.c    ****     	}
 963              		.loc 1 138 7 is_stmt 1 view .LVU269
 138:Src/main.c    ****     	}
 964              		.loc 1 138 16 is_stmt 0 view .LVU270
 965 010e 0D4B     		ldr	r3, .L40+12
 966 0110 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 967 0112 DBB2     		uxtb	r3, r3
 138:Src/main.c    ****     	}
 968              		.loc 1 138 27 view .LVU271
 969 0114 0C4A     		ldr	r2, .L40+16
 970 0116 D05C     		ldrb	r0, [r2, r3]	@ zero_extendqisi2
 971 0118 FFF7FEFF 		bl	__aeabi_i2f
 972              	.LVL60:
 138:Src/main.c    ****     	}
 973              		.loc 1 138 10 view .LVU272
 974 011c 2146     		mov	r1, r4
 975 011e FFF7FEFF 		bl	__aeabi_fcmplt
 976              	.LVL61:
 977 0122 0028     		cmp	r0, #0
 978 0124 80D1     		bne	.L35
 136:Src/main.c    ****     	{
 979              		.loc 1 136 57 discriminator 2 view .LVU273
 980 0126 074A     		ldr	r2, .L40+12
 981 0128 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 982 012a 013B     		subs	r3, r3, #1
 983 012c DBB2     		uxtb	r3, r3
 984 012e 1370     		strb	r3, [r2]
 985 0130 E9E7     		b	.L34
 986              	.L41:
 987 0132 00BFAFF3 		.align	3
 987      0080
 988              	.L40:
 989 0138 66666666 		.word	1717986918
 990 013c 66660A40 		.word	1074423398
 991 0140 00000000 		.word	hadc1
 992 0144 00000000 		.word	.LANCHOR4
 993 0148 00000000 		.word	.LANCHOR5
 994 014c 00000000 		.word	.LANCHOR3
 995 0150 00F07F45 		.word	1166012416
 996 0154 33335340 		.word	1079194419
 997 0158 00000000 		.word	.LANCHOR6
 998 015c 00000000 		.word	.LANCHOR8
 999 0160 00000000 		.word	.LANCHOR7
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 29


 1000 0164 00000000 		.word	.LC0
 1001 0168 00000000 		.word	huart1
 1002 016c 00000000 		.word	.LANCHOR1
 1003 0170 00000000 		.word	.LANCHOR2
 1004              	.LBE7:
 1005              		.cfi_endproc
 1006              	.LFE68:
 1008              		.section	.text.Error_Handler,"ax",%progbits
 1009              		.align	1
 1010              		.global	Error_Handler
 1011              		.syntax unified
 1012              		.thumb
 1013              		.thumb_func
 1014              		.fpu softvfp
 1016              	Error_Handler:
 1017              	.LFB77:
 409:Src/main.c    **** /* USER CODE END 4 */
 410:Src/main.c    **** 
 411:Src/main.c    **** /**
 412:Src/main.c    ****   * @brief  This function is executed in case of error occurrence.
 413:Src/main.c    ****   * @retval None
 414:Src/main.c    ****   */
 415:Src/main.c    **** void Error_Handler(void)
 416:Src/main.c    **** {
 1018              		.loc 1 416 1 is_stmt 1 view -0
 1019              		.cfi_startproc
 1020              		@ args = 0, pretend = 0, frame = 0
 1021              		@ frame_needed = 0, uses_anonymous_args = 0
 1022              		@ link register save eliminated.
 417:Src/main.c    ****   /* USER CODE BEGIN Error_Handler_Debug */
 418:Src/main.c    ****   /* User can add his own implementation to report the HAL error return state */
 419:Src/main.c    **** 
 420:Src/main.c    ****   /* USER CODE END Error_Handler_Debug */
 421:Src/main.c    **** }
 1023              		.loc 1 421 1 view .LVU275
 1024 0000 7047     		bx	lr
 1025              		.cfi_endproc
 1026              	.LFE77:
 1028              		.comm	huart2,64,4
 1029              		.comm	huart1,64,4
 1030              		.comm	hspi1,88,4
 1031              		.comm	hadc1,48,4
 1032              		.section	.bss.ADC_msg.7614,"aw",%nobits
 1033              		.align	2
 1034              		.set	.LANCHOR8,. + 0
 1037              	ADC_msg.7614:
 1038 0000 00000000 		.space	128
 1038      00000000 
 1038      00000000 
 1038      00000000 
 1038      00000000 
 1039              		.section	.bss.SPI_msg,"aw",%nobits
 1040              		.align	2
 1041              		.set	.LANCHOR0,. + 0
 1044              	SPI_msg:
 1045 0000 00000000 		.space	128
 1045      00000000 
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 30


 1045      00000000 
 1045      00000000 
 1045      00000000 
 1046              		.section	.bss.Vin_min.7620,"aw",%nobits
 1047              		.align	2
 1048              		.set	.LANCHOR3,. + 0
 1051              	Vin_min.7620:
 1052 0000 00000000 		.space	4
 1053              		.section	.bss.Vref.7622,"aw",%nobits
 1054              		.align	1
 1057              	Vref.7622:
 1058 0000 0000     		.space	2
 1059              		.section	.bss.gain_idx.7619,"aw",%nobits
 1060              		.set	.LANCHOR4,. + 0
 1063              	gain_idx.7619:
 1064 0000 00       		.space	1
 1065              		.section	.bss.lightVal.7616,"aw",%nobits
 1066              		.align	1
 1067              		.set	.LANCHOR6,. + 0
 1070              	lightVal.7616:
 1071 0000 0000     		.space	2
 1072              		.section	.bss.zoomAndEnhance.7617,"aw",%nobits
 1073              		.set	.LANCHOR1,. + 0
 1076              	zoomAndEnhance.7617:
 1077 0000 00       		.space	1
 1078              		.section	.data.Vin_max.7621,"aw"
 1079              		.align	2
 1080              		.set	.LANCHOR2,. + 0
 1083              	Vin_max.7621:
 1084 0000 33335340 		.word	1079194419
 1085              		.section	.rodata.channel_name.7615,"a"
 1086              		.align	2
 1087              		.set	.LANCHOR7,. + 0
 1090              	channel_name.7615:
 1091 0000 4C696768 		.ascii	"LightSensor\000"
 1091      7453656E 
 1091      736F7200 
 1092              		.section	.rodata.gain.7618,"a"
 1093              		.align	2
 1094              		.set	.LANCHOR5,. + 0
 1097              	gain.7618:
 1098 0000 01       		.byte	1
 1099 0001 02       		.byte	2
 1100 0002 04       		.byte	4
 1101 0003 05       		.byte	5
 1102 0004 08       		.byte	8
 1103 0005 0A       		.byte	10
 1104 0006 10       		.byte	16
 1105 0007 20       		.byte	32
 1106              		.section	.rodata.main.str1.4,"aMS",%progbits,1
 1107              		.align	2
 1108              	.LC0:
 1109 0000 7B202263 		.ascii	"{ \"channel\" : \"%s\", \"time\" : %d, \"value\" : "
 1109      68616E6E 
 1109      656C2220 
 1109      3A202225 
 1109      73222C20 
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 31


 1110 002b 2564207D 		.ascii	"%d }\012\015\000"
 1110      0A0D00
 1111              		.text
 1112              	.Letext0:
 1113              		.file 2 "c:\\users\\nathan.jones2\\miniconda3\\envs\\conda-env\\library\\arm-none-eabi\\include\\m
 1114              		.file 3 "c:\\users\\nathan.jones2\\miniconda3\\envs\\conda-env\\library\\arm-none-eabi\\include\\s
 1115              		.file 4 "Drivers/CMSIS/Include/core_cm3.h"
 1116              		.file 5 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 1117              		.file 6 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 1118              		.file 7 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f1xx.h"
 1119              		.file 8 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 1120              		.file 9 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_rcc.h"
 1121              		.file 10 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_rcc_ex.h"
 1122              		.file 11 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_gpio.h"
 1123              		.file 12 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 1124              		.file 13 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_adc.h"
 1125              		.file 14 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_spi.h"
 1126              		.file 15 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_uart.h"
 1127              		.file 16 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 1128              		.file 17 "Inc/main.h"
 1129              		.file 18 "c:\\users\\nathan.jones2\\miniconda3\\envs\\conda-env\\library\\lib\\gcc\\arm-none-eabi\
 1130              		.file 19 "c:\\users\\nathan.jones2\\miniconda3\\envs\\conda-env\\library\\arm-none-eabi\\include\\
 1131              		.file 20 "c:\\users\\nathan.jones2\\miniconda3\\envs\\conda-env\\library\\arm-none-eabi\\include\\
 1132              		.file 21 "c:\\users\\nathan.jones2\\miniconda3\\envs\\conda-env\\library\\arm-none-eabi\\include\\
 1133              		.file 22 "c:\\users\\nathan.jones2\\miniconda3\\envs\\conda-env\\library\\arm-none-eabi\\include\\
 1134              		.file 23 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_adc_ex.h"
 1135              		.file 24 "c:\\users\\nathan.jones2\\miniconda3\\envs\\conda-env\\library\\arm-none-eabi\\include\\
 1136              		.file 25 "c:\\users\\nathan.jones2\\miniconda3\\envs\\conda-env\\library\\arm-none-eabi\\include\\
 1137              		.file 26 "<built-in>"
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 32


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:16     .text.MX_GPIO_Init:00000000 $t
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:23     .text.MX_GPIO_Init:00000000 MX_GPIO_Init
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:139    .text.MX_GPIO_Init:00000080 $d
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:145    .text.MX_ADC1_Init:00000000 $t
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:151    .text.MX_ADC1_Init:00000000 MX_ADC1_Init
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:227    .text.MX_ADC1_Init:0000003c $d
                            *COM*:00000030 hadc1
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:233    .text.MX_SPI1_Init:00000000 $t
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:239    .text.MX_SPI1_Init:00000000 MX_SPI1_Init
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:305    .text.MX_SPI1_Init:0000003c $d
                            *COM*:00000058 hspi1
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:311    .text.MX_USART1_UART_Init:00000000 $t
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:317    .text.MX_USART1_UART_Init:00000000 MX_USART1_UART_Init
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:366    .text.MX_USART1_UART_Init:00000024 $d
                            *COM*:00000040 huart1
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:372    .text.MX_USART2_UART_Init:00000000 $t
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:378    .text.MX_USART2_UART_Init:00000000 MX_USART2_UART_Init
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:427    .text.MX_USART2_UART_Init:00000024 $d
                            *COM*:00000040 huart2
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:433    .text.SystemClock_Config:00000000 $t
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:440    .text.SystemClock_Config:00000000 SystemClock_Config
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:548    .text.setGain:00000000 $t
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:555    .text.setGain:00000000 setGain
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:618    .text.setGain:00000048 $d
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:625    .text.setVref:00000000 $t
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:632    .text.setVref:00000000 setVref
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:720    .text.setVref:00000070 $d
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:736    .text.main:00000000 $t
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:743    .text.main:00000000 main
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:989    .text.main:00000138 $d
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1009   .text.Error_Handler:00000000 $t
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1016   .text.Error_Handler:00000000 Error_Handler
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1033   .bss.ADC_msg.7614:00000000 $d
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1037   .bss.ADC_msg.7614:00000000 ADC_msg.7614
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1040   .bss.SPI_msg:00000000 $d
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1044   .bss.SPI_msg:00000000 SPI_msg
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1047   .bss.Vin_min.7620:00000000 $d
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1051   .bss.Vin_min.7620:00000000 Vin_min.7620
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1054   .bss.Vref.7622:00000000 $d
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1057   .bss.Vref.7622:00000000 Vref.7622
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1063   .bss.gain_idx.7619:00000000 gain_idx.7619
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1064   .bss.gain_idx.7619:00000000 $d
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1066   .bss.lightVal.7616:00000000 $d
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1070   .bss.lightVal.7616:00000000 lightVal.7616
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1076   .bss.zoomAndEnhance.7617:00000000 zoomAndEnhance.7617
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1077   .bss.zoomAndEnhance.7617:00000000 $d
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1079   .data.Vin_max.7621:00000000 $d
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1083   .data.Vin_max.7621:00000000 Vin_max.7621
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1086   .rodata.channel_name.7615:00000000 $d
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1090   .rodata.channel_name.7615:00000000 channel_name.7615
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1093   .rodata.gain.7618:00000000 $d
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1097   .rodata.gain.7618:00000000 gain.7618
C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s:1107   .rodata.main.str1.4:00000000 $d

UNDEFINED SYMBOLS
ARM GAS  C:\Users\NATHAN~1.JON\AppData\Local\Temp\ccdO1A1s.s 			page 33


HAL_GPIO_WritePin
HAL_GPIO_Init
HAL_ADC_Init
HAL_ADC_ConfigChannel
HAL_SPI_Init
HAL_UART_Init
HAL_RCC_OscConfig
HAL_RCC_ClockConfig
HAL_RCCEx_PeriphCLKConfig
memset
HAL_SPI_Transmit
__aeabi_fsub
__aeabi_f2d
__aeabi_ddiv
__aeabi_d2f
__aeabi_i2f
__aeabi_fcmplt
__aeabi_fmul
__aeabi_fdiv
__aeabi_d2uiz
HAL_Init
HAL_ADCEx_Calibration_Start
round
HAL_ADC_Start
HAL_ADC_PollForConversion
HAL_ADC_GetValue
HAL_GetTick
sprintf
strlen
HAL_UART_Transmit
HAL_Delay
