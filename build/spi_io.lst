ARM GAS  /tmp/ccTCuTsq.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"spi_io.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.SPI_Init,"ax",%progbits
  16              		.align	1
  17              		.global	SPI_Init
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	SPI_Init:
  24              	.LFB66:
  25              		.file 1 "Middlewares/Third_Party/ulibSD/spi_io.c"
   1:Middlewares/Third_Party/ulibSD/spi_io.c **** /*
   2:Middlewares/Third_Party/ulibSD/spi_io.c ****  *  File: spi_io.c.example
   3:Middlewares/Third_Party/ulibSD/spi_io.c ****  *  Author: Nelson Lombardo
   4:Middlewares/Third_Party/ulibSD/spi_io.c ****  *  Year: 2015
   5:Middlewares/Third_Party/ulibSD/spi_io.c ****  *  e-mail: nelson.lombardo@gmail.com
   6:Middlewares/Third_Party/ulibSD/spi_io.c ****  *  License at the end of file.
   7:Middlewares/Third_Party/ulibSD/spi_io.c ****  */
   8:Middlewares/Third_Party/ulibSD/spi_io.c **** 
   9:Middlewares/Third_Party/ulibSD/spi_io.c **** #include <stdio.h>
  10:Middlewares/Third_Party/ulibSD/spi_io.c **** #include "spi_io.h"
  11:Middlewares/Third_Party/ulibSD/spi_io.c **** #include "main.h"
  12:Middlewares/Third_Party/ulibSD/spi_io.c **** 
  13:Middlewares/Third_Party/ulibSD/spi_io.c **** extern SPI_HandleTypeDef hspi1;
  14:Middlewares/Third_Party/ulibSD/spi_io.c **** extern TIM_HandleTypeDef htim1;
  15:Middlewares/Third_Party/ulibSD/spi_io.c **** uint32_t * GPIOA_BSRR = (uint32_t *)0x40010810;
  16:Middlewares/Third_Party/ulibSD/spi_io.c **** uint32_t * GPIOA_BRR = (uint32_t *)0x40010814;
  17:Middlewares/Third_Party/ulibSD/spi_io.c **** uint16_t SPI_NSS_Pin_Pos = 4u;
  18:Middlewares/Third_Party/ulibSD/spi_io.c **** uint32_t SPI_NSS_Pin_Mask = (0x1 << 4);
  19:Middlewares/Third_Party/ulibSD/spi_io.c **** uint32_t * RCC_CFGR = (uint32_t *)0x40021004;
  20:Middlewares/Third_Party/ulibSD/spi_io.c **** uint16_t PPRE2_Pos = 11u;
  21:Middlewares/Third_Party/ulibSD/spi_io.c **** uint32_t PPRE2_Mask = (0x111 << 11);
  22:Middlewares/Third_Party/ulibSD/spi_io.c **** uint32_t * SPI_CR1 = (uint32_t *)0x40013000;
  23:Middlewares/Third_Party/ulibSD/spi_io.c **** uint16_t SPI_BR_Pos = 3u;
  24:Middlewares/Third_Party/ulibSD/spi_io.c **** uint32_t SPI_BR_Mask = (0x111 << 3);
  25:Middlewares/Third_Party/ulibSD/spi_io.c **** 
  26:Middlewares/Third_Party/ulibSD/spi_io.c **** uint32_t spiTimerTickStart;
  27:Middlewares/Third_Party/ulibSD/spi_io.c **** uint32_t spiTimerTickDelay;
  28:Middlewares/Third_Party/ulibSD/spi_io.c **** 
  29:Middlewares/Third_Party/ulibSD/spi_io.c **** 
  30:Middlewares/Third_Party/ulibSD/spi_io.c **** /******************************************************************************
  31:Middlewares/Third_Party/ulibSD/spi_io.c ****  Module Public Functions - Low level SPI control functions
  32:Middlewares/Third_Party/ulibSD/spi_io.c **** ******************************************************************************/
  33:Middlewares/Third_Party/ulibSD/spi_io.c **** 
ARM GAS  /tmp/ccTCuTsq.s 			page 2


  34:Middlewares/Third_Party/ulibSD/spi_io.c **** void SPI_Init (void) {
  26              		.loc 1 34 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              		@ link register save eliminated.
  31 0000 7047     		bx	lr
  32              		.cfi_endproc
  33              	.LFE66:
  35              		.section	.text.SPI_RW,"ax",%progbits
  36              		.align	1
  37              		.global	SPI_RW
  38              		.syntax unified
  39              		.thumb
  40              		.thumb_func
  41              		.fpu softvfp
  43              	SPI_RW:
  44              	.LFB67:
  35:Middlewares/Third_Party/ulibSD/spi_io.c **** }
  36:Middlewares/Third_Party/ulibSD/spi_io.c **** 
  37:Middlewares/Third_Party/ulibSD/spi_io.c **** BYTE SPI_RW (BYTE d) {
  45              		.loc 1 37 0
  46              		.cfi_startproc
  47              		@ args = 0, pretend = 0, frame = 8
  48              		@ frame_needed = 0, uses_anonymous_args = 0
  49              	.LVL0:
  50              		.loc 1 37 0
  51 0000 00B5     		push	{lr}
  52              	.LCFI0:
  53              		.cfi_def_cfa_offset 4
  54              		.cfi_offset 14, -4
  55 0002 85B0     		sub	sp, sp, #20
  56              	.LCFI1:
  57              		.cfi_def_cfa_offset 24
  38:Middlewares/Third_Party/ulibSD/spi_io.c ****     uint8_t rx_data = 0, tx_data = d;
  58              		.loc 1 38 0
  59 0004 0023     		movs	r3, #0
  60 0006 8DF80F30 		strb	r3, [sp, #15]
  61 000a 8DF80E00 		strb	r0, [sp, #14]
  39:Middlewares/Third_Party/ulibSD/spi_io.c ****     HAL_SPI_TransmitReceive(&hspi1, (uint8_t *)(&tx_data), &rx_data, 1, 0);
  62              		.loc 1 39 0
  63 000e 0093     		str	r3, [sp]
  64 0010 0123     		movs	r3, #1
  65 0012 0DF10F02 		add	r2, sp, #15
  66 0016 0DF10E01 		add	r1, sp, #14
  67 001a 0448     		ldr	r0, .L4
  68              	.LVL1:
  69 001c FFF7FEFF 		bl	HAL_SPI_TransmitReceive
  70              	.LVL2:
  40:Middlewares/Third_Party/ulibSD/spi_io.c ****     return (rx_data);
  41:Middlewares/Third_Party/ulibSD/spi_io.c **** }
  71              		.loc 1 41 0
  72 0020 9DF80F00 		ldrb	r0, [sp, #15]	@ zero_extendqisi2
  73 0024 05B0     		add	sp, sp, #20
  74              	.LCFI2:
  75              		.cfi_def_cfa_offset 4
  76              		@ sp needed
ARM GAS  /tmp/ccTCuTsq.s 			page 3


  77 0026 5DF804FB 		ldr	pc, [sp], #4
  78              	.L5:
  79 002a 00BF     		.align	2
  80              	.L4:
  81 002c 00000000 		.word	hspi1
  82              		.cfi_endproc
  83              	.LFE67:
  85              		.section	.text.SPI_Release,"ax",%progbits
  86              		.align	1
  87              		.global	SPI_Release
  88              		.syntax unified
  89              		.thumb
  90              		.thumb_func
  91              		.fpu softvfp
  93              	SPI_Release:
  94              	.LFB68:
  42:Middlewares/Third_Party/ulibSD/spi_io.c **** 
  43:Middlewares/Third_Party/ulibSD/spi_io.c **** void SPI_Release (void) {
  95              		.loc 1 43 0
  96              		.cfi_startproc
  97              		@ args = 0, pretend = 0, frame = 0
  98              		@ frame_needed = 0, uses_anonymous_args = 0
  99 0000 10B5     		push	{r4, lr}
 100              	.LCFI3:
 101              		.cfi_def_cfa_offset 8
 102              		.cfi_offset 4, -8
 103              		.cfi_offset 14, -4
 104              	.LVL3:
  44:Middlewares/Third_Party/ulibSD/spi_io.c ****     WORD idx;
  45:Middlewares/Third_Party/ulibSD/spi_io.c ****     for (idx=512; idx && (SPI_RW(0xFF)!=0xFF); idx--);
 105              		.loc 1 45 0
 106 0002 4FF40074 		mov	r4, #512
 107 0006 01E0     		b	.L7
 108              	.LVL4:
 109              	.L9:
 110              		.loc 1 45 0 is_stmt 0 discriminator 4
 111 0008 013C     		subs	r4, r4, #1
 112              	.LVL5:
 113 000a A4B2     		uxth	r4, r4
 114              	.LVL6:
 115              	.L7:
 116              		.loc 1 45 0 discriminator 1
 117 000c 24B1     		cbz	r4, .L6
 118              		.loc 1 45 0 discriminator 3
 119 000e FF20     		movs	r0, #255
 120 0010 FFF7FEFF 		bl	SPI_RW
 121              	.LVL7:
 122 0014 FF28     		cmp	r0, #255
 123 0016 F7D1     		bne	.L9
 124              	.L6:
 125 0018 10BD     		pop	{r4, pc}
 126              		.cfi_endproc
 127              	.LFE68:
 129              		.section	.text.SPI_CS_Low,"ax",%progbits
 130              		.align	1
 131              		.global	SPI_CS_Low
 132              		.syntax unified
ARM GAS  /tmp/ccTCuTsq.s 			page 4


 133              		.thumb
 134              		.thumb_func
 135              		.fpu softvfp
 137              	SPI_CS_Low:
 138              	.LFB69:
  46:Middlewares/Third_Party/ulibSD/spi_io.c **** }
  47:Middlewares/Third_Party/ulibSD/spi_io.c **** 
  48:Middlewares/Third_Party/ulibSD/spi_io.c **** inline void SPI_CS_Low (void) {
 139              		.loc 1 48 0 is_stmt 1
 140              		.cfi_startproc
 141              		@ args = 0, pretend = 0, frame = 0
 142              		@ frame_needed = 0, uses_anonymous_args = 0
 143              		@ link register save eliminated.
  49:Middlewares/Third_Party/ulibSD/spi_io.c ****     *GPIOA_BRR |= SPI_NSS_Pin_Mask;
 144              		.loc 1 49 0
 145 0000 034B     		ldr	r3, .L12
 146 0002 1A68     		ldr	r2, [r3]
 147 0004 1368     		ldr	r3, [r2]
 148 0006 0349     		ldr	r1, .L12+4
 149 0008 0968     		ldr	r1, [r1]
 150 000a 0B43     		orrs	r3, r3, r1
 151 000c 1360     		str	r3, [r2]
 152 000e 7047     		bx	lr
 153              	.L13:
 154              		.align	2
 155              	.L12:
 156 0010 00000000 		.word	.LANCHOR0
 157 0014 00000000 		.word	.LANCHOR1
 158              		.cfi_endproc
 159              	.LFE69:
 161              		.section	.text.SPI_CS_High,"ax",%progbits
 162              		.align	1
 163              		.global	SPI_CS_High
 164              		.syntax unified
 165              		.thumb
 166              		.thumb_func
 167              		.fpu softvfp
 169              	SPI_CS_High:
 170              	.LFB70:
  50:Middlewares/Third_Party/ulibSD/spi_io.c **** }
  51:Middlewares/Third_Party/ulibSD/spi_io.c **** 
  52:Middlewares/Third_Party/ulibSD/spi_io.c **** inline void SPI_CS_High (void){
 171              		.loc 1 52 0
 172              		.cfi_startproc
 173              		@ args = 0, pretend = 0, frame = 0
 174              		@ frame_needed = 0, uses_anonymous_args = 0
 175              		@ link register save eliminated.
  53:Middlewares/Third_Party/ulibSD/spi_io.c ****     *GPIOA_BSRR |= SPI_NSS_Pin_Mask;
 176              		.loc 1 53 0
 177 0000 034B     		ldr	r3, .L15
 178 0002 1A68     		ldr	r2, [r3]
 179 0004 1368     		ldr	r3, [r2]
 180 0006 0349     		ldr	r1, .L15+4
 181 0008 0968     		ldr	r1, [r1]
 182 000a 0B43     		orrs	r3, r3, r1
 183 000c 1360     		str	r3, [r2]
 184 000e 7047     		bx	lr
ARM GAS  /tmp/ccTCuTsq.s 			page 5


 185              	.L16:
 186              		.align	2
 187              	.L15:
 188 0010 00000000 		.word	.LANCHOR2
 189 0014 00000000 		.word	.LANCHOR1
 190              		.cfi_endproc
 191              	.LFE70:
 193              		.section	.text.SPI_Freq_High,"ax",%progbits
 194              		.align	1
 195              		.global	SPI_Freq_High
 196              		.syntax unified
 197              		.thumb
 198              		.thumb_func
 199              		.fpu softvfp
 201              	SPI_Freq_High:
 202              	.LFB71:
  54:Middlewares/Third_Party/ulibSD/spi_io.c **** }
  55:Middlewares/Third_Party/ulibSD/spi_io.c **** 
  56:Middlewares/Third_Party/ulibSD/spi_io.c **** inline void SPI_Freq_High (void) {
 203              		.loc 1 56 0
 204              		.cfi_startproc
 205              		@ args = 0, pretend = 0, frame = 0
 206              		@ frame_needed = 0, uses_anonymous_args = 0
 207              		@ link register save eliminated.
  57:Middlewares/Third_Party/ulibSD/spi_io.c ****     *SPI_CR1 &= ~(SPI_BR_Mask);
 208              		.loc 1 57 0
 209 0000 044B     		ldr	r3, .L18
 210 0002 1A68     		ldr	r2, [r3]
 211 0004 044B     		ldr	r3, .L18+4
 212 0006 1968     		ldr	r1, [r3]
 213 0008 1368     		ldr	r3, [r2]
 214 000a 23EA0103 		bic	r3, r3, r1
 215 000e 1360     		str	r3, [r2]
 216 0010 7047     		bx	lr
 217              	.L19:
 218 0012 00BF     		.align	2
 219              	.L18:
 220 0014 00000000 		.word	.LANCHOR3
 221 0018 00000000 		.word	.LANCHOR4
 222              		.cfi_endproc
 223              	.LFE71:
 225              		.section	.text.SPI_Freq_Low,"ax",%progbits
 226              		.align	1
 227              		.global	SPI_Freq_Low
 228              		.syntax unified
 229              		.thumb
 230              		.thumb_func
 231              		.fpu softvfp
 233              	SPI_Freq_Low:
 234              	.LFB72:
  58:Middlewares/Third_Party/ulibSD/spi_io.c **** }
  59:Middlewares/Third_Party/ulibSD/spi_io.c **** 
  60:Middlewares/Third_Party/ulibSD/spi_io.c **** inline void SPI_Freq_Low (void) {
 235              		.loc 1 60 0
 236              		.cfi_startproc
 237              		@ args = 0, pretend = 0, frame = 0
 238              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccTCuTsq.s 			page 6


 239 0000 08B5     		push	{r3, lr}
 240              	.LCFI4:
 241              		.cfi_def_cfa_offset 8
 242              		.cfi_offset 3, -8
 243              		.cfi_offset 14, -4
  61:Middlewares/Third_Party/ulibSD/spi_io.c ****     if ( *RCC_CFGR & PPRE2_Mask )
 244              		.loc 1 61 0
 245 0002 104B     		ldr	r3, .L25
 246 0004 1B68     		ldr	r3, [r3]
 247 0006 1A68     		ldr	r2, [r3]
 248 0008 0F4B     		ldr	r3, .L25+4
 249 000a 1B68     		ldr	r3, [r3]
 250 000c 1A42     		tst	r2, r3
 251 000e 10D0     		beq	.L21
  62:Middlewares/Third_Party/ulibSD/spi_io.c ****     {
  63:Middlewares/Third_Party/ulibSD/spi_io.c ****         //APB2 prescaler is >1 and APB2 timer clock is 2x APB2 clock
  64:Middlewares/Third_Party/ulibSD/spi_io.c ****         if ( ( HAL_RCC_GetPCLK2Freq() * 2 / 256 ) > 400000 )
 252              		.loc 1 64 0
 253 0010 FFF7FEFF 		bl	HAL_RCC_GetPCLK2Freq
 254              	.LVL8:
 255 0014 0D4B     		ldr	r3, .L25+8
 256 0016 B3EB400F 		cmp	r3, r0, lsl #1
 257 001a 07D3     		bcc	.L24
 258              	.L22:
  65:Middlewares/Third_Party/ulibSD/spi_io.c ****         {
  66:Middlewares/Third_Party/ulibSD/spi_io.c ****             Error_Handler();
  67:Middlewares/Third_Party/ulibSD/spi_io.c ****         }
  68:Middlewares/Third_Party/ulibSD/spi_io.c ****     }
  69:Middlewares/Third_Party/ulibSD/spi_io.c ****     else
  70:Middlewares/Third_Party/ulibSD/spi_io.c ****     {
  71:Middlewares/Third_Party/ulibSD/spi_io.c ****         //APB2 prescaler is x1 and APB2 timer clock = APB2 clock
  72:Middlewares/Third_Party/ulibSD/spi_io.c ****         if ( ( HAL_RCC_GetPCLK2Freq() / 256 ) > 400000 )
  73:Middlewares/Third_Party/ulibSD/spi_io.c ****         {
  74:Middlewares/Third_Party/ulibSD/spi_io.c ****             Error_Handler();
  75:Middlewares/Third_Party/ulibSD/spi_io.c ****         }
  76:Middlewares/Third_Party/ulibSD/spi_io.c ****     }
  77:Middlewares/Third_Party/ulibSD/spi_io.c ****     *SPI_CR1 |= SPI_BR_Mask;
 259              		.loc 1 77 0
 260 001c 0C4B     		ldr	r3, .L25+12
 261 001e 1A68     		ldr	r2, [r3]
 262 0020 1368     		ldr	r3, [r2]
 263 0022 0C49     		ldr	r1, .L25+16
 264 0024 0968     		ldr	r1, [r1]
 265 0026 0B43     		orrs	r3, r3, r1
 266 0028 1360     		str	r3, [r2]
 267 002a 08BD     		pop	{r3, pc}
 268              	.L24:
  66:Middlewares/Third_Party/ulibSD/spi_io.c ****         }
 269              		.loc 1 66 0
 270 002c FFF7FEFF 		bl	Error_Handler
 271              	.LVL9:
 272 0030 F4E7     		b	.L22
 273              	.L21:
  72:Middlewares/Third_Party/ulibSD/spi_io.c ****         {
 274              		.loc 1 72 0
 275 0032 FFF7FEFF 		bl	HAL_RCC_GetPCLK2Freq
 276              	.LVL10:
ARM GAS  /tmp/ccTCuTsq.s 			page 7


 277 0036 054B     		ldr	r3, .L25+8
 278 0038 9842     		cmp	r0, r3
 279 003a EFD9     		bls	.L22
  74:Middlewares/Third_Party/ulibSD/spi_io.c ****         }
 280              		.loc 1 74 0
 281 003c FFF7FEFF 		bl	Error_Handler
 282              	.LVL11:
 283 0040 ECE7     		b	.L22
 284              	.L26:
 285 0042 00BF     		.align	2
 286              	.L25:
 287 0044 00000000 		.word	.LANCHOR5
 288 0048 00000000 		.word	.LANCHOR6
 289 004c FF801A06 		.word	102400255
 290 0050 00000000 		.word	.LANCHOR3
 291 0054 00000000 		.word	.LANCHOR4
 292              		.cfi_endproc
 293              	.LFE72:
 295              		.section	.text.SPI_Timer_On,"ax",%progbits
 296              		.align	1
 297              		.global	SPI_Timer_On
 298              		.syntax unified
 299              		.thumb
 300              		.thumb_func
 301              		.fpu softvfp
 303              	SPI_Timer_On:
 304              	.LFB73:
  78:Middlewares/Third_Party/ulibSD/spi_io.c **** }
  79:Middlewares/Third_Party/ulibSD/spi_io.c **** 
  80:Middlewares/Third_Party/ulibSD/spi_io.c **** void SPI_Timer_On (WORD ms) {
 305              		.loc 1 80 0
 306              		.cfi_startproc
 307              		@ args = 0, pretend = 0, frame = 0
 308              		@ frame_needed = 0, uses_anonymous_args = 0
 309              	.LVL12:
 310 0000 10B5     		push	{r4, lr}
 311              	.LCFI5:
 312              		.cfi_def_cfa_offset 8
 313              		.cfi_offset 4, -8
 314              		.cfi_offset 14, -4
 315 0002 0446     		mov	r4, r0
  81:Middlewares/Third_Party/ulibSD/spi_io.c ****     spiTimerTickStart = HAL_GetTick();
 316              		.loc 1 81 0
 317 0004 FFF7FEFF 		bl	HAL_GetTick
 318              	.LVL13:
 319 0008 024B     		ldr	r3, .L29
 320 000a 1860     		str	r0, [r3]
  82:Middlewares/Third_Party/ulibSD/spi_io.c ****     spiTimerTickDelay = ms;
 321              		.loc 1 82 0
 322 000c 024B     		ldr	r3, .L29+4
 323 000e 1C60     		str	r4, [r3]
 324 0010 10BD     		pop	{r4, pc}
 325              	.L30:
 326 0012 00BF     		.align	2
 327              	.L29:
 328 0014 00000000 		.word	spiTimerTickStart
 329 0018 00000000 		.word	spiTimerTickDelay
ARM GAS  /tmp/ccTCuTsq.s 			page 8


 330              		.cfi_endproc
 331              	.LFE73:
 333              		.section	.text.SPI_Timer_Status,"ax",%progbits
 334              		.align	1
 335              		.global	SPI_Timer_Status
 336              		.syntax unified
 337              		.thumb
 338              		.thumb_func
 339              		.fpu softvfp
 341              	SPI_Timer_Status:
 342              	.LFB74:
  83:Middlewares/Third_Party/ulibSD/spi_io.c **** }
  84:Middlewares/Third_Party/ulibSD/spi_io.c **** 
  85:Middlewares/Third_Party/ulibSD/spi_io.c **** inline BOOL SPI_Timer_Status (void) {
 343              		.loc 1 85 0
 344              		.cfi_startproc
 345              		@ args = 0, pretend = 0, frame = 0
 346              		@ frame_needed = 0, uses_anonymous_args = 0
 347 0000 08B5     		push	{r3, lr}
 348              	.LCFI6:
 349              		.cfi_def_cfa_offset 8
 350              		.cfi_offset 3, -8
 351              		.cfi_offset 14, -4
  86:Middlewares/Third_Party/ulibSD/spi_io.c ****     return ((HAL_GetTick() - spiTimerTickStart) < spiTimerTickDelay);
 352              		.loc 1 86 0
 353 0002 FFF7FEFF 		bl	HAL_GetTick
 354              	.LVL14:
 355 0006 054B     		ldr	r3, .L33
 356 0008 1B68     		ldr	r3, [r3]
 357 000a C01A     		subs	r0, r0, r3
 358 000c 044B     		ldr	r3, .L33+4
 359 000e 1B68     		ldr	r3, [r3]
  87:Middlewares/Third_Party/ulibSD/spi_io.c **** }
 360              		.loc 1 87 0
 361 0010 9842     		cmp	r0, r3
 362 0012 2CBF     		ite	cs
 363 0014 0020     		movcs	r0, #0
 364 0016 0120     		movcc	r0, #1
 365 0018 08BD     		pop	{r3, pc}
 366              	.L34:
 367 001a 00BF     		.align	2
 368              	.L33:
 369 001c 00000000 		.word	spiTimerTickStart
 370 0020 00000000 		.word	spiTimerTickDelay
 371              		.cfi_endproc
 372              	.LFE74:
 374              		.section	.text.SPI_Timer_Off,"ax",%progbits
 375              		.align	1
 376              		.global	SPI_Timer_Off
 377              		.syntax unified
 378              		.thumb
 379              		.thumb_func
 380              		.fpu softvfp
 382              	SPI_Timer_Off:
 383              	.LFB75:
  88:Middlewares/Third_Party/ulibSD/spi_io.c **** 
  89:Middlewares/Third_Party/ulibSD/spi_io.c **** inline void SPI_Timer_Off (void) {
ARM GAS  /tmp/ccTCuTsq.s 			page 9


 384              		.loc 1 89 0
 385              		.cfi_startproc
 386              		@ args = 0, pretend = 0, frame = 0
 387              		@ frame_needed = 0, uses_anonymous_args = 0
 388              		@ link register save eliminated.
 389 0000 7047     		bx	lr
 390              		.cfi_endproc
 391              	.LFE75:
 393              		.comm	spiTimerTickDelay,4,4
 394              		.comm	spiTimerTickStart,4,4
 395              		.global	SPI_BR_Mask
 396              		.global	SPI_BR_Pos
 397              		.global	SPI_CR1
 398              		.global	PPRE2_Mask
 399              		.global	PPRE2_Pos
 400              		.global	RCC_CFGR
 401              		.global	SPI_NSS_Pin_Mask
 402              		.global	SPI_NSS_Pin_Pos
 403              		.global	GPIOA_BRR
 404              		.global	GPIOA_BSRR
 405              		.section	.data.GPIOA_BRR,"aw",%progbits
 406              		.align	2
 407              		.set	.LANCHOR0,. + 0
 410              	GPIOA_BRR:
 411 0000 14080140 		.word	1073809428
 412              		.section	.data.GPIOA_BSRR,"aw",%progbits
 413              		.align	2
 414              		.set	.LANCHOR2,. + 0
 417              	GPIOA_BSRR:
 418 0000 10080140 		.word	1073809424
 419              		.section	.data.PPRE2_Mask,"aw",%progbits
 420              		.align	2
 421              		.set	.LANCHOR6,. + 0
 424              	PPRE2_Mask:
 425 0000 00880800 		.word	559104
 426              		.section	.data.PPRE2_Pos,"aw",%progbits
 427              		.align	1
 430              	PPRE2_Pos:
 431 0000 0B00     		.short	11
 432              		.section	.data.RCC_CFGR,"aw",%progbits
 433              		.align	2
 434              		.set	.LANCHOR5,. + 0
 437              	RCC_CFGR:
 438 0000 04100240 		.word	1073876996
 439              		.section	.data.SPI_BR_Mask,"aw",%progbits
 440              		.align	2
 441              		.set	.LANCHOR4,. + 0
 444              	SPI_BR_Mask:
 445 0000 88080000 		.word	2184
 446              		.section	.data.SPI_BR_Pos,"aw",%progbits
 447              		.align	1
 450              	SPI_BR_Pos:
 451 0000 0300     		.short	3
 452              		.section	.data.SPI_CR1,"aw",%progbits
 453              		.align	2
 454              		.set	.LANCHOR3,. + 0
 457              	SPI_CR1:
ARM GAS  /tmp/ccTCuTsq.s 			page 10


 458 0000 00300140 		.word	1073819648
 459              		.section	.data.SPI_NSS_Pin_Mask,"aw",%progbits
 460              		.align	2
 461              		.set	.LANCHOR1,. + 0
 464              	SPI_NSS_Pin_Mask:
 465 0000 10000000 		.word	16
 466              		.section	.data.SPI_NSS_Pin_Pos,"aw",%progbits
 467              		.align	1
 470              	SPI_NSS_Pin_Pos:
 471 0000 0400     		.short	4
 472              		.text
 473              	.Letext0:
 474              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 475              		.file 3 "/usr/include/newlib/sys/lock.h"
 476              		.file 4 "/usr/include/newlib/sys/_types.h"
 477              		.file 5 "/usr/lib/gcc/arm-none-eabi/6.3.1/include/stddef.h"
 478              		.file 6 "/usr/include/newlib/sys/reent.h"
 479              		.file 7 "/usr/include/newlib/sys/_stdint.h"
 480              		.file 8 "Middlewares/Third_Party/FatFs/src/integer.h"
 481              		.file 9 "Middlewares/Third_Party/ulibSD/integer_ulibsd.h"
 482              		.file 10 "Drivers/CMSIS/Include/core_cm3.h"
 483              		.file 11 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 484              		.file 12 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 485              		.file 13 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 486              		.file 14 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 487              		.file 15 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_spi.h"
 488              		.file 16 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_tim.h"
 489              		.file 17 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 490              		.file 18 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_rcc.h"
 491              		.file 19 "Inc/main.h"
ARM GAS  /tmp/ccTCuTsq.s 			page 11


DEFINED SYMBOLS
                            *ABS*:0000000000000000 spi_io.c
     /tmp/ccTCuTsq.s:16     .text.SPI_Init:0000000000000000 $t
     /tmp/ccTCuTsq.s:23     .text.SPI_Init:0000000000000000 SPI_Init
     /tmp/ccTCuTsq.s:36     .text.SPI_RW:0000000000000000 $t
     /tmp/ccTCuTsq.s:43     .text.SPI_RW:0000000000000000 SPI_RW
     /tmp/ccTCuTsq.s:81     .text.SPI_RW:000000000000002c $d
     /tmp/ccTCuTsq.s:86     .text.SPI_Release:0000000000000000 $t
     /tmp/ccTCuTsq.s:93     .text.SPI_Release:0000000000000000 SPI_Release
     /tmp/ccTCuTsq.s:130    .text.SPI_CS_Low:0000000000000000 $t
     /tmp/ccTCuTsq.s:137    .text.SPI_CS_Low:0000000000000000 SPI_CS_Low
     /tmp/ccTCuTsq.s:156    .text.SPI_CS_Low:0000000000000010 $d
     /tmp/ccTCuTsq.s:162    .text.SPI_CS_High:0000000000000000 $t
     /tmp/ccTCuTsq.s:169    .text.SPI_CS_High:0000000000000000 SPI_CS_High
     /tmp/ccTCuTsq.s:188    .text.SPI_CS_High:0000000000000010 $d
     /tmp/ccTCuTsq.s:194    .text.SPI_Freq_High:0000000000000000 $t
     /tmp/ccTCuTsq.s:201    .text.SPI_Freq_High:0000000000000000 SPI_Freq_High
     /tmp/ccTCuTsq.s:220    .text.SPI_Freq_High:0000000000000014 $d
     /tmp/ccTCuTsq.s:226    .text.SPI_Freq_Low:0000000000000000 $t
     /tmp/ccTCuTsq.s:233    .text.SPI_Freq_Low:0000000000000000 SPI_Freq_Low
     /tmp/ccTCuTsq.s:287    .text.SPI_Freq_Low:0000000000000044 $d
     /tmp/ccTCuTsq.s:296    .text.SPI_Timer_On:0000000000000000 $t
     /tmp/ccTCuTsq.s:303    .text.SPI_Timer_On:0000000000000000 SPI_Timer_On
     /tmp/ccTCuTsq.s:328    .text.SPI_Timer_On:0000000000000014 $d
                            *COM*:0000000000000004 spiTimerTickStart
                            *COM*:0000000000000004 spiTimerTickDelay
     /tmp/ccTCuTsq.s:334    .text.SPI_Timer_Status:0000000000000000 $t
     /tmp/ccTCuTsq.s:341    .text.SPI_Timer_Status:0000000000000000 SPI_Timer_Status
     /tmp/ccTCuTsq.s:369    .text.SPI_Timer_Status:000000000000001c $d
     /tmp/ccTCuTsq.s:375    .text.SPI_Timer_Off:0000000000000000 $t
     /tmp/ccTCuTsq.s:382    .text.SPI_Timer_Off:0000000000000000 SPI_Timer_Off
     /tmp/ccTCuTsq.s:444    .data.SPI_BR_Mask:0000000000000000 SPI_BR_Mask
     /tmp/ccTCuTsq.s:450    .data.SPI_BR_Pos:0000000000000000 SPI_BR_Pos
     /tmp/ccTCuTsq.s:457    .data.SPI_CR1:0000000000000000 SPI_CR1
     /tmp/ccTCuTsq.s:424    .data.PPRE2_Mask:0000000000000000 PPRE2_Mask
     /tmp/ccTCuTsq.s:430    .data.PPRE2_Pos:0000000000000000 PPRE2_Pos
     /tmp/ccTCuTsq.s:437    .data.RCC_CFGR:0000000000000000 RCC_CFGR
     /tmp/ccTCuTsq.s:464    .data.SPI_NSS_Pin_Mask:0000000000000000 SPI_NSS_Pin_Mask
     /tmp/ccTCuTsq.s:470    .data.SPI_NSS_Pin_Pos:0000000000000000 SPI_NSS_Pin_Pos
     /tmp/ccTCuTsq.s:410    .data.GPIOA_BRR:0000000000000000 GPIOA_BRR
     /tmp/ccTCuTsq.s:417    .data.GPIOA_BSRR:0000000000000000 GPIOA_BSRR
     /tmp/ccTCuTsq.s:406    .data.GPIOA_BRR:0000000000000000 $d
     /tmp/ccTCuTsq.s:413    .data.GPIOA_BSRR:0000000000000000 $d
     /tmp/ccTCuTsq.s:420    .data.PPRE2_Mask:0000000000000000 $d
     /tmp/ccTCuTsq.s:427    .data.PPRE2_Pos:0000000000000000 $d
     /tmp/ccTCuTsq.s:433    .data.RCC_CFGR:0000000000000000 $d
     /tmp/ccTCuTsq.s:440    .data.SPI_BR_Mask:0000000000000000 $d
     /tmp/ccTCuTsq.s:447    .data.SPI_BR_Pos:0000000000000000 $d
     /tmp/ccTCuTsq.s:453    .data.SPI_CR1:0000000000000000 $d
     /tmp/ccTCuTsq.s:460    .data.SPI_NSS_Pin_Mask:0000000000000000 $d
     /tmp/ccTCuTsq.s:467    .data.SPI_NSS_Pin_Pos:0000000000000000 $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
HAL_SPI_TransmitReceive
hspi1
HAL_RCC_GetPCLK2Freq
ARM GAS  /tmp/ccTCuTsq.s 			page 12


Error_Handler
HAL_GetTick
